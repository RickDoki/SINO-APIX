(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6cc0378"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"27af":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("div",{staticClass:"card-top"},[r("div",{staticClass:"input-box"},[r("span",[e._v("组织名：")]),r("el-input",{staticStyle:{width:"77%"},attrs:{size:"small",placeholder:"请输入组织名查询"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),r("div",{staticClass:"input-box",staticStyle:{"margin-left":"40px"}}),r("div",{staticClass:"but-right"},[r("el-button",{attrs:{size:"small"},on:{click:e.resetSearch}},[e._v("重置")]),r("el-button",{staticStyle:{"background-color":"#2c66fb"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getuserList()}}},[e._v("查询")])],1)]),r("el-table",{attrs:{"row-style":{height:"48px"},data:e.tableData,stripe:"","header-cell-style":{background:"#F0F2F5",color:"#333333"}}},[r("el-table-column",{attrs:{prop:"name",label:"组织名","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.ischangeShow?r("el-button",{staticStyle:{color:"#2c66fb"},attrs:{type:"text"},on:{click:function(r){return e.edit(t.row)}}},[e._v("修改")]):e._e(),r("span",{staticStyle:{padding:"0 6px",color:"#D8D8D8"}},[e._v("|")]),e.istianjiaShow?r("el-button",{staticStyle:{color:"#2c66fb"},attrs:{type:"text"},on:{click:function(r){return e.editUser(t.row)}}},[e._v("添加成员")]):e._e()]}}])})],1),r("el-pagination",{staticStyle:{margin:"24px 0px",float:"right"},attrs:{"current-page":e.offset,"page-sizes":[10,20,30,40,50],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-drawer",{attrs:{title:"添加成员","before-close":e.handleCloseAdd,visible:e.drawerAdd,direction:"rtl",size:"35%"},on:{"update:visible":function(t){e.drawerAdd=t}}},[r("div",{staticClass:"demo-drawer__content"},[r("el-form",{ref:"formuser",attrs:{model:e.formuser,rules:e.rulesuser,"label-position":"top"}},[r("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[r("el-input",{attrs:{maxlength:"11","show-word-limit":"",autocomplete:"off",placeholder:"请输入手机号"},model:{value:e.formuser.mobile,callback:function(t){e.$set(e.formuser,"mobile",t)},expression:"formuser.mobile"}})],1),r("el-form-item",{attrs:{label:"组织名",prop:"orgId"}},[r("el-input",{attrs:{placeholder:"请输如组织名",disabled:"",autocomplete:"off"},model:{value:e.formuser.orgId,callback:function(t){e.$set(e.formuser,"orgId",t)},expression:"formuser.orgId"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入邮箱",autocomplete:"off"},model:{value:e.formuser.email,callback:function(t){e.$set(e.formuser,"email",t)},expression:"formuser.email"}})],1),r("el-form-item",{attrs:{label:"用户名",prop:"用户名"}},[r("el-input",{attrs:{placeholder:"请输入用户名",autocomplete:"off"},model:{value:e.formuser.username,callback:function(t){e.$set(e.formuser,"username",t)},expression:"formuser.username"}})],1)],1)],1),r("div",{staticClass:"demo-drawer__footer",staticStyle:{"padding-right":"20px"}},[r("el-button",{staticStyle:{"background-color":"#2c66fb","border-color":"#2c66fb"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.orgSure("formuser")}}},[e._v(e._s("确 定"))])],1)]),r("el-drawer",{attrs:{title:"组织管理","before-close":e.handleClose,visible:e.drawer,direction:"rtl",size:"35%"},on:{"update:visible":function(t){e.drawer=t}}},[r("div",{staticClass:"demo-drawer__content"},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"top"}},[r("el-form-item",{attrs:{label:"组织名",prop:"username"}},[r("el-input",{attrs:{maxlength:"25","show-word-limit":"",autocomplete:"off",placeholder:"请输入新的组织名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),r("div",{staticClass:"demo-drawer__footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){return e.resetForm("form")}}},[e._v("取 消")]),r("el-button",{staticStyle:{"background-color":"#2c66fb","border-color":"#2c66fb"},attrs:{type:"primary",size:"small",loading:e.loading},on:{click:function(t){return e.submitForm("form")}}},[e._v(e._s(e.loading?"提交中 ...":"确 定"))])],1)],1)])],1)},s=[],a=(r("b0c0"),r("99af"),r("ac1f"),r("841c"),r("c24f")),n=r("cc5e"),i=r("5f87"),l={components:{},data:function(){return{userId:0,drawer:!1,loading:!1,drawerAdd:!1,search:{name:"",role:""},formuser:{mobile:"",orgId:"",email:"",username:""},form:{id:"",username:"",mobile:"",email:"",roleId:"",enabled:!0},rowid:"",roleList:[],offset:1,limit:10,total:0,tableData:[],rules:{username:[{required:!0,message:"请输入新的组织名",trigger:"blur"}],email:[{pattern:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请输入正确的邮箱地址"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],roleId:[{required:!0,message:"请选用户角色",trigger:"change"}]},rulesuser:{email:[{pattern:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请输入正确的邮箱地址"}],mobile:[{required:!0,message:"请输入手机号",trigger:"change"}]},orgName:"",ischangeShow:!1,istianjiaShow:!1}},created:function(){this.userId=parseInt(Object(i["a"])("userId_api")),this.getuserList(),this.getRoles();var e=this.$router.currentRoute.meta.title,t=JSON.parse(sessionStorage.getItem("buttonList"));console.log(t);for(var r=0;r<t.length;r++)if(t[r].name===e)for(var o=0;o<t[r].list.length;o++)"修改"===t[r].list[o].name&&(this.ischangeShow=!0),"添加成员"===t[r].list[o].name&&(this.istianjiaShow=!0)},methods:{getuserList:function(){var e=this,t="?offset=".concat(this.offset,"&limit=").concat(this.limit);this.search.name&&(t+="&name=".concat(this.search.name)),this.search.role&&(t+="&roleId=".concat(this.search.role)),Object(a["l"])(t).then((function(t){200===t.code&&(e.tableData=t.data.orgList,e.total=t.data.total)}))},getRoles:function(){var e=this;Object(n["e"])().then((function(t){200===t.code&&(e.roleList=t.data)}))},editUser:function(e){console.log(e),this.drawerAdd=!0,this.formuser.orgId=e.name,this.orgName=e.id},resetSearch:function(){this.search.name="",this.search.role="",this.getuserList()},resetForm:function(e){this.$refs[e].resetFields()},edit:function(e){this.drawer=!0,console.log(e),this.rowid=e.id},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){console.log(t.form);var r={name:t.form.username};console.log(r),Object(a["j"])(t.rowid,r).then((function(e){200===e.code&&(t.resetForm("form"),t.drawer=!1,t.page=1,t.getuserList())}))}}))},orgSure:function(e){var t=this;console.log(9999),this.$refs[e].validate((function(e){if(e){var r={mobile:t.formuser.mobile,orgId:t.orgName,email:t.formuser.email,username:t.formuser.username};Object(a["k"])(r).then((function(e){200===e.code?(t.messageOK(e.msg),t.formuser={mobile:"",orgId:"",email:"",username:""},t.orgName="",t.drawerAdd=!1):t.messageERROR(e.msg)}))}}))},messageOK:function(e){this.$message({message:e,type:"success"})},messageERROR:function(e){this.$message({message:e,type:"error"})},handleClose:function(e){this.drawer=!1,this.resetForm("form")},handleCloseAdd:function(e){this.drawerAdd=!1,this.resetForm("formuser")},delCert:function(e){this.$confirm("确认删除用户："+e.username+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.limit=e,this.getuserList()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.offset=e,this.getuserList()}}},c=l,u=(r("8f63"),r("2877")),m=Object(u["a"])(c,o,s,!1,null,"a4bbcaa6",null);t["default"]=m.exports},"841c":function(e,t,r){"use strict";var o=r("d784"),s=r("825a"),a=r("1d80"),n=r("129f"),i=r("14c3");o("search",1,(function(e,t,r){return[function(t){var r=a(this),o=void 0==t?void 0:t[e];return void 0!==o?o.call(t,r):new RegExp(t)[e](String(r))},function(e){var o=r(t,e,this);if(o.done)return o.value;var a=s(e),l=String(this),c=a.lastIndex;n(c,0)||(a.lastIndex=0);var u=i(a,l);return n(a.lastIndex,c)||(a.lastIndex=c),null===u?-1:u.index}]}))},"8f63":function(e,t,r){"use strict";r("ffed")},cc5e:function(e,t,r){"use strict";r.d(t,"e",(function(){return s})),r.d(t,"d",(function(){return a})),r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"g",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"f",(function(){return u}));var o=r("b775");function s(){return Object(o["a"])({url:"/user/sys/role/select",method:"get"})}function a(e){return Object(o["a"])({url:"/user/sys/role/list"+e,method:"get"})}function n(e){return Object(o["a"])({url:"/user/sys/role/save",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/user/sys/role/info/"+e,method:"get"})}function l(e){return Object(o["a"])({url:"/user/sys/role/update",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/user/sys/role/delete",method:"post",data:e})}function u(e){return Object(o["a"])({url:"user/sys/menu/permList/"+e,method:"get"})}},ffed:function(e,t,r){}}]);