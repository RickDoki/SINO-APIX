(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4db62826"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"327d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"card-top"},[a("div",[t.ischuangjianShow?a("el-button",{staticStyle:{"background-color":"#2c66fb"},attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.gotoDetail}},[t._v("创建")]):t._e()],1),a("div",{staticClass:"input-box",staticStyle:{"margin-left":"20px"}},[a("el-input",{attrs:{placeholder:"请输入内容",size:"small",clearable:""},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}}),a("el-button",{staticStyle:{"border-left":"none"},attrs:{size:"small",icon:"el-icon-search"},on:{click:function(e){return t.getUpstreamList()}}})],1),a("div",{staticClass:"but-right"},[a("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:function(e){return t.getUpstreamList()}}})],1)]),a("el-table",{attrs:{"row-style":{height:"48px"},data:t.tableData,stripe:"","header-cell-style":{background:"#F0F2F5",color:"#333333"}}},[a("el-table-column",{attrs:{prop:"name",label:"服务名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"server_address",label:"服务地址","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"protocol",label:"协议类型"}}),a("el-table-column",{attrs:{prop:"lastUpdateDate",label:"更新时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.ispeizhiShow?a("el-button",{staticStyle:{color:"#2c66fb"},attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("配置")]):t._e(),t.ischakanShow?a("el-button",{staticStyle:{color:"#2c66fb"},attrs:{type:"text"},on:{click:function(a){return t.view(e.row)}}},[t._v("查看")]):t._e(),t.isshanchuShow?a("el-button",{staticStyle:{color:"#f6323c"},attrs:{type:"text"},on:{click:function(a){return t.delCert(e.row)}}},[t._v("删除")]):t._e()]}}])})],1),a("el-pagination",{staticStyle:{margin:"24px 0px",float:"right"},attrs:{"current-page":t.offset,"page-sizes":[10,20,30,40,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-drawer",{attrs:{title:"数据编辑器","before-close":t.handleClose,visible:t.drawer,direction:"rtl",size:"35%"},on:{"update:visible":function(e){t.drawer=e}}},[a("div",{staticClass:"demo-drawer__content"},[a("div",{staticStyle:{"text-align":"right"}},[a("div",{staticClass:"but-right2"},[a("el-select",{staticStyle:{width:"85px"},attrs:{size:"small"},model:{value:t.codeType,callback:function(e){t.codeType=e},expression:"codeType"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-button",{staticStyle:{"background-color":"#2c66fb","margin-left":"10px"},attrs:{size:"small",type:"primary"}},[t._v("复制")]),a("el-button",{attrs:{size:"small"}},[t._v("文档")])],1)]),a("div",{staticClass:"code-box"},[a("prism-editor",{staticClass:"my-editor height-300 default-prism-editor",attrs:{highlight:t.highlighter,"line-numbers":t.lineNumbers},model:{value:t.requestExample,callback:function(e){t.requestExample=e},expression:"requestExample"}})],1),a("div",{staticClass:"demo-drawer__footer"},[a("el-button",{on:{click:function(e){return t.resetForm("form")}}},[t._v("取 消")]),a("el-button",{staticStyle:{"background-color":"#2c66fb"},attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$refs.drawer.closeDrawer()}}},[t._v(t._s(t.loading?"提交中 ...":"提 交"))])],1)])]),a("el-drawer",{attrs:{title:"上游服务详情","before-close":t.handleClose,visible:t.drawerInfo,direction:"rtl",size:"45%"},on:{"update:visible":function(e){t.drawerInfo=e}}},[a("div",{staticClass:"demo-drawer__content"},[a("el-descriptions",{attrs:{title:" ",size:"medium",column:2,border:""}},[a("el-descriptions-item",{attrs:{label:"服务名称"}},[t._v(t._s(t.upstreamInfo.name))]),a("el-descriptions-item",{attrs:{label:"负载均衡算法"}},[t._v(t._s(t.upstreamInfo.load_balance))]),a("el-descriptions-item",{attrs:{label:"服务端口"}},[t._v(t._s(t.upstreamInfo.port))]),a("el-descriptions-item",{attrs:{label:"路由前置路径"}},[t._v(t._s(t.upstreamInfo.prefix_path))]),a("el-descriptions-item",{attrs:{label:"协议"}},[t._v(t._s(t.upstreamInfo.protocol))]),a("el-descriptions-item",{attrs:{label:"服务地址"}},[t._v(t._s(t.upstreamInfo.server_address))]),a("el-descriptions-item",{attrs:{label:"服务描述"}},[t._v(t._s(t.upstreamInfo.description))])],1)],1)])],1)},s=[],i=(a("b0c0"),a("99af"),a("ac1f"),a("841c"),a("ecbf")),r=a("8c7a"),o=(a("cabf"),a("e57a")),l=(a("cb55"),a("416b"),a("84bf"),{components:{PrismEditor:o["a"]},data:function(){return{codeType:"json",requestExample:"{}",lineNumbers:!0,drawer:!1,drawerInfo:!1,upstreamInfo:{},loading:!1,search:{name:""},form:{name:"",email:"",password:"",role:[]},options:[{value:"json",label:"JSON"},{value:"yaml",label:"YAML"}],offset:1,limit:10,total:0,tableData:[],ispeizhiShow:!1,isshanchuShow:!1,ischakanShow:!1,ischuangjianShow:!1}},created:function(){this.getUpstreamList();var t=this.$router.currentRoute.meta.title;console.log(t);var e=JSON.parse(sessionStorage.getItem("buttonList"));console.log(e);for(var a=0;a<e.length;a++)if(e[a].name===t)for(var n=0;n<e[a].list.length;n++)"配置"===e[a].list[n].name&&(this.ispeizhiShow=!0),"删除"===e[a].list[n].name&&(this.isshanchuShow=!0),"查看"===e[a].list[n].name&&(this.ischakanShow=!0),"创建"===e[a].list[n].name&&(this.ischuangjianShow=!0)},methods:{gotoDetail:function(){this.$router.push({path:"/upstream/create"})},getUpstreamList:function(){var t=this,e="?offset=".concat(this.offset,"&limit=").concat(this.limit);this.search.name&&(e+="&name=".concat(this.search.name)),Object(i["d"])(e).then((function(e){200===e.code&&(t.tableData=e.data.upstreamList,t.total=e.data.total)}))},view:function(t){this.drawerInfo=!0,this.upstreamInfo=t},edit:function(t){this.$router.push({path:"/upstream/edit/"+t.id})},editData:function(){this.drawer=!0},handleClose:function(t){this.drawer=!1,this.drawerInfo=!1},delCert:function(t){var e=this;this.$confirm("确认删除上游服务："+t.name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["b"])(t.id).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.offset=1,e.getUpstreamList()}))})).catch((function(){}))},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.limit=t,this.getUpstreamList()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.offset=t,this.getUpstreamList()},highlighter:function(t){return Object(r["highlight"])(t,r["languages"].js)}}}),c=l,u=(a("7e28"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"12e13836",null);e["default"]=d.exports},"4bf9":function(t,e,a){},"7e28":function(t,e,a){"use strict";a("4bf9")},"841c":function(t,e,a){"use strict";var n=a("d784"),s=a("825a"),i=a("1d80"),r=a("129f"),o=a("14c3");n("search",1,(function(t,e,a){return[function(e){var a=i(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a):new RegExp(e)[t](String(a))},function(t){var n=a(e,t,this);if(n.done)return n.value;var i=s(t),l=String(this),c=i.lastIndex;r(c,0)||(i.lastIndex=0);var u=o(i,l);return r(i.lastIndex,c)||(i.lastIndex=c),null===u?-1:u.index}]}))},ecbf:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"b",(function(){return l}));var n=a("b775");function s(t){return Object(n["a"])({url:"/app/upstream/list"+t,method:"get"})}function i(t){return Object(n["a"])({url:"/app/upstream",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/app/upstream/"+t,method:"get"})}function o(t,e){return Object(n["a"])({url:"/app/upstream/"+t,method:"put",data:e})}function l(t){return Object(n["a"])({url:"/app/upstream/"+t,method:"delete"})}}}]);