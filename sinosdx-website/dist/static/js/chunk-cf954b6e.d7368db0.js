(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf954b6e"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"4237b":function(e,t,r){"use strict";r("50ae")},"50ae":function(e,t,r){},"841c":function(e,t,r){"use strict";var a=r("d784"),s=r("825a"),o=r("1d80"),l=r("129f"),n=r("14c3");a("search",1,(function(e,t,r){return[function(t){var r=o(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](String(r))},function(e){var a=r(t,e,this);if(a.done)return a.value;var o=s(e),i=String(this),c=o.lastIndex;l(c,0)||(o.lastIndex=0);var u=n(o,i);return l(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},cc5e:function(e,t,r){"use strict";r.d(t,"e",(function(){return s})),r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return l})),r.d(t,"c",(function(){return n})),r.d(t,"g",(function(){return i})),r.d(t,"b",(function(){return c})),r.d(t,"f",(function(){return u}));var a=r("b775");function s(){return Object(a["a"])({url:"/user/sys/role/select",method:"get"})}function o(e){return Object(a["a"])({url:"/user/sys/role/list"+e,method:"get"})}function l(e){return Object(a["a"])({url:"/user/sys/role/save",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/user/sys/role/info/"+e,method:"get"})}function i(e){return Object(a["a"])({url:"/user/sys/role/update",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/user/sys/role/delete",method:"post",data:e})}function u(e){return Object(a["a"])({url:"user/sys/menu/permList/"+e,method:"get"})}},ffa1:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("div",{staticClass:"card-top"},[r("div",{staticClass:"input-box"},[r("span",[e._v("用户名：")]),r("el-input",{staticStyle:{width:"77%"},attrs:{size:"small",placeholder:"请输入用户名查询"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),r("div",{staticClass:"input-box",staticStyle:{"margin-left":"40px"}},[r("span",[e._v("角色：")]),r("el-select",{staticStyle:{width:"77%"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.search.role,callback:function(t){e.$set(e.search,"role",t)},expression:"search.role"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),r("div",{staticClass:"but-right"},[r("el-button",{attrs:{size:"small"},on:{click:e.resetSearch}},[e._v("重置")]),r("el-button",{staticStyle:{"background-color":"#2C66FB"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getuserList()}}},[e._v("查询")])],1)]),r("el-table",{attrs:{"row-style":{height:"48px"},data:e.tableData,stripe:"","header-cell-style":{background:"#F0F2F5",color:"#333333"}}},[r("el-table-column",{attrs:{prop:"username",label:"用户名",width:"150","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"roleName",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{size:"small"}},[e._v(e._s(t.row.roleName))])]}}])}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isbuttonShow?r("el-button",{staticStyle:{color:"#2C66FB"},attrs:{type:"text"},on:{click:function(r){return e.edit(t.row)}}},[e._v("配置")]):e._e()]}}])})],1),r("el-pagination",{staticStyle:{margin:"24px 0px",float:"right"},attrs:{"current-page":e.offset,"page-sizes":[10,20,30,40,50],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-drawer",{attrs:{title:"用户设置","before-close":e.handleClose,visible:e.drawer,direction:"rtl",size:"35%"},on:{"update:visible":function(t){e.drawer=t}}},[r("div",{staticClass:"demo-drawer__content"},[r("el-descriptions",{staticClass:"margin-top",staticStyle:{"margin-bottom":"10px"},attrs:{column:1,size:"small",border:""}},[r("el-descriptions-item",[r("template",{slot:"label"},[r("i",{staticClass:"el-icon-mobile-phone"}),e._v(" 手机号 ")]),e._v(" "+e._s(e.form.mobile)+" ")],2)],1),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"top"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{maxlength:"25","show-word-limit":"",autocomplete:"off",placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入邮箱",autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),r("el-form-item",{staticClass:"is-required",attrs:{label:"是否启用"}},[r("el-switch",{attrs:{"active-color":"#2C66FB"},model:{value:e.form.enabled,callback:function(t){e.$set(e.form,"enabled",t)},expression:"form.enabled"}})],1)],1),r("div",{staticClass:"demo-drawer__footer"},[r("el-button",{staticStyle:{"background-color":"#2C66FB","border-color":"#2C66FB"},attrs:{type:"primary",size:"small",loading:e.loading},on:{click:function(t){return e.submitForm("form")}}},[e._v(e._s(e.loading?"提交中 ...":"确 定"))])],1)],1)])],1)},s=[],o=(r("b0c0"),r("99af"),r("ac1f"),r("841c"),r("c24f")),l=r("cc5e"),n=r("5f87"),i={components:{},data:function(){return{userId:0,drawer:!1,loading:!1,isbuttonShow:!1,search:{name:"",role:""},form:{id:"",username:"",mobile:"",email:"",roleId:"",enabled:!0},roleList:[],offset:1,limit:10,total:0,tableData:[],rules:{username:[{required:!0,message:"请输入用户名称",trigger:"blur"}],email:[{pattern:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请输入正确的邮箱地址"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],roleId:[{required:!0,message:"请选用户角色",trigger:"change"}]}}},created:function(){this.userId=parseInt(Object(n["a"])("userId_api")),this.getuserList(),this.getRoles();for(var e=this.$router.currentRoute.meta.title,t=JSON.parse(sessionStorage.getItem("buttonList")),r=0;r<t.length;r++)t[r].name===e&&(1===t[r].list.length?this.isbuttonShow=!0:this.isbuttonShow=!1)},methods:{getuserList:function(){var e=this,t="?offset=".concat(this.offset,"&limit=").concat(this.limit);this.search.name&&(t+="&username=".concat(this.search.name)),this.search.role&&(t+="&roleId=".concat(this.search.role)),Object(o["e"])(t).then((function(t){200===t.code&&(e.tableData=t.data.userList,e.total=t.data.total)}))},getRoles:function(){var e=this;Object(l["e"])().then((function(t){200===t.code&&(e.roleList=t.data)}))},resetSearch:function(){this.search.name="",this.search.role="",this.getuserList()},resetForm:function(e){this.$refs[e].resetFields()},edit:function(e){this.drawer=!0,this.form={id:e.id,username:e.username,mobile:e.mobile,email:e.email,roleId:e.roleId,enabled:e.enabled},0===e.roleId&&(this.form.roleId="")},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(o["m"])(t.form.id,t.form).then((function(e){200===e.code&&(t.resetForm("form"),t.drawer=!1,t.page=1,t.getuserList())}))}))},handleClose:function(e){this.drawer=!1,this.resetForm("form")},delCert:function(e){var t=this;this.$confirm("确认删除用户："+e.username+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({type:"success",message:"删除成功!"})})).catch((function(){}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.limit=e,this.getuserList()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.offset=e,this.getuserList()}}},c=i,u=(r("4237b"),r("2877")),d=Object(u["a"])(c,a,s,!1,null,"86b54eca",null);t["default"]=d.exports}}]);