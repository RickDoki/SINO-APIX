(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bcaf403"],{"00d3":function(e,t,a){},"05bc":function(e,t,a){},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},1915:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"api_list_main"},[a("el-row",{staticClass:"search",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入API名称"},model:{value:e.APIName,callback:function(t){e.APIName=t},expression:"APIName"}})],1),a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini","value-format":"timestamp","default-time":["00:00:00","23:59:59"]},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),a("el-col",{attrs:{offset:4,span:6}},[a("el-button",{attrs:{plain:"",size:"mini"},on:{click:e.reset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("查询")])],1)],1),a("el-divider"),a("el-row",{staticClass:"search",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.goApicreate}},[e._v("创建")])],1)],1),a("table-list",{attrs:{total:e.total,data:e.tableList},on:{refresh:e.refresh,pageChange:e.pageChange,sizeChange:e.sizeChange}})],1)},n=[],s=(a("ac1f"),a("841c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tableFather"},[a("el-dialog",{attrs:{title:"详情","modal-append-to-body":!1,visible:e.MKDialogVisible},on:{"update:visible":function(t){e.MKDialogVisible=t}}},[a("div",[a("p",[e._v("请求参数:")]),a("vxe-table",{ref:"xTable",attrs:{border:"","show-overflow":"",data:e.requestParams}},[a("vxe-table-column",{attrs:{field:"parame",title:"参数","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"type",title:"类型","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"isHaveto",title:"是否必选","edit-render":{name:"$select",options:[{value:"是",label:"是"},{value:"否",label:"否"}]}}}),a("vxe-table-column",{attrs:{field:"describe",title:"描述","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"default",title:"默认值","edit-render":{name:"input"}}})],1),a("vue-context-menu",{attrs:{contextMenuData:e.contextMenuData,readonly:e.readonly},on:{savedata:e.savedata,newdata:e.newdata}})],1),a("div",[a("p",[e._v("请求示例:")]),a("prism-editor",{staticClass:"my-editor height-300",attrs:{highlight:e.highlighter,readonly:e.readonly,"line-numbers":e.lineNumbers},model:{value:e.requestExample,callback:function(t){e.requestExample=t},expression:"requestExample"}})],1),a("div",[a("p",[e._v("返回示例:")]),a("prism-editor",{staticClass:"my-editor height-300",attrs:{highlight:e.highlighter,readonly:e.readonly,"line-numbers":e.lineNumbers},model:{value:e.responseExample,callback:function(t){e.responseExample=t},expression:"responseExample"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.MKDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.MKSure()}}},[e._v("确 定")])],1)]),a("el-table",{staticClass:"table",attrs:{data:e.data,"header-cell-style":{background:"#F0F2F5"},border:"","empty-text":"暂无数据"}},[a("el-table-column",{attrs:{align:"center",prop:"apiName",label:"API名称"}}),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",prop:"domain",label:"域名"}}),a("el-table-column",{attrs:{align:"center",prop:"apiUrl",label:"路径"}}),a("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}}),a("el-table-column",{attrs:{align:"center",width:"110",prop:"apiVersion",label:"最新版本号"}}),a("el-table-column",{attrs:{align:"center",width:"100",prop:"apiCreationUser",label:"创建人"}}),a("el-table-column",{attrs:{align:"center",width:"158",prop:"apiCreationDate",label:"创建时间"}}),a("el-table-column",{attrs:{align:"center",width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticStyle:{"margin-left":"15px"},attrs:{size:"mini",underline:!1,type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{float:"right",margin:"20px"},attrs:{"current-page":e.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"page-sizes":[10,20,30,40],"page-size":e.size},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)}),r=[],l=a("1da1"),o=(a("96cf"),a("a9e3"),a("b2cc")),c=(a("64e1"),a("e57a")),u=(a("cabf"),a("8c7a")),d=(a("cb55"),a("416b"),a("84bf"),{components:{PrismEditor:c["a"]},props:{data:{type:Array,default:null},total:{type:Number,default:0}},data:function(){return{status:{60012:["info","未发布"],60011:["success","已发布"],60002:["success","已上架"],60003:["danger","异常中"],60004:["warning","已停用"]},size:10,readonly:!0,currentPage:1,requestExample:"",responseExample:"",lineNumbers:!0,MKDialogVisible:!1,requestParams:[{parame:"name",type:"String",isHaveto:"必选",describe:"描述",default:"默认值"}],contextMenuData:{menuName:"demo",axis:{x:null,y:null},menulists:[{fnHandler:"savedata",icoName:"fa fa-home fa-fw",btnName:"新增一行"},{fnHandler:"newdata",icoName:"fa fa-home fa-fw",btnName:"删除选中 "}]},content:"",apiId:""}},methods:{handleSizeChange:function(e){console.log(e),this.$emit("sizeChange",e)},highlighter:function(e){return Object(u["highlight"])(e,u["languages"].js)},insertEvent:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,i,n,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=-1,i=e.$refs.xTable,n={parame:"",type:"",isHaveto:"",describe:"",default:""},t.next=5,i.insertAt(n,a);case 5:return s=t.sent,r=s.row,t.next=9,i.setActiveCell(r,"parame");case 9:case"end":return t.stop()}}),t)})))()},showMenu:function(){event.preventDefault();var e=event.clientX,t=event.clientY;this.contextMenuData.axis={x:e,y:t}},savedata:function(){this.insertEvent()},newdata:function(){this.$refs.xTable.removeCheckboxRow()},handleCurrentChange:function(e){this.currentPage=e,this.$emit("pageChange",e)},handleEdit:function(e,t){this.MKDialogVisible=!0,console.log(t),this.content=t.markdown,this.apiVersionId=t.versionId,console.log(JSON.parse(t.requestParams)),this.requestParams=JSON.parse(t.requestParams),this.requestExample=JSON.parse(t.requestExample),this.responseExample=JSON.parse(t.responseExample)},handleDelete:function(e,t){var a=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["d"])(t.apiId).then((function(e){200!==e.code?a.$message({message:e.msg,type:"error"}):(a.$emit("refresh",!0),a.$message({message:e.msg,type:"success"}))}))}))},publishNV:function(e,t){this.$router.push({path:"/api/add?message="+JSON.stringify(t)})},MKSure:function(){var e=this,t={};Object(o["b"])(this.apiVersionId,t).then((function(t){200===t.code?e.messageOK(t.msg):e.messageERROR(t.msg),e.MKDialogVisible=!1,e.$emit("refresh",!0)}))},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},messageOK:function(e){this.$message({message:e,type:"success"})},messageERROR:function(e){this.$message({message:e,type:"error"})}}}),p=d,h=(a("f770"),a("2877")),m=Object(h["a"])(p,s,r,!1,null,"5a7e2b17",null),f=m.exports,g=a("5f87"),v={components:{tableList:f},data:function(){return{APIName:"",value1:[],tableList:[],total:0,developerId:"",page:1,size:10}},created:function(){this.developerId=Object(g["a"])("userId_api");var e="limit="+this.size+"&offset="+this.page+"&developerId="+this.developerId;this.getList(e)},methods:{sizeChange:function(e){this.size=e;var t="?limit="+this.size+"&offset="+this.page+"&developerId="+this.developerId;this.getList(t)},search:function(){if(this.page=1,this.value1)if(0===this.value1.length){var e="limit="+this.size+"&offset="+this.page+"&apiName="+this.APIName+"&developerId="+this.developerId;this.getList(e)}else{var t="limit="+this.size+"&offset="+this.page+"&apiName="+this.APIName+"&startTime="+this.value1[0]+"&endTime="+this.value1[1]+"&developerId="+this.developerId;this.getList(t)}else{var a="limit="+this.size+"&offset="+this.page+"&apiName="+this.APIName+"&developerId="+this.developerId;this.getList(a)}},getList:function(e){var t=this;Object(o["c"])(e).then((function(e){200===e.code&&(t.tableList=e.data.apiList,console.log(t.tableList),t.total=e.data.total)}))},refresh:function(){var e="limit="+this.size+"&offset= "+this.page+"&developerId="+this.developerId;this.getList(e)},reset:function(){this.value1=[],this.APIName="",this.search()},pageChange:function(e){this.page=e;var t="limit="+this.size+"&offset="+this.page+"&developerId="+this.developerId;this.getList(t)},goApicreate:function(){this.$router.push("/api/add")}}},b=v,x=(a("d3e7"),Object(h["a"])(b,i,n,!1,null,"d7810ffa",null));t["default"]=x.exports},"64e1":function(e,t,a){},"841c":function(e,t,a){"use strict";var i=a("d784"),n=a("825a"),s=a("1d80"),r=a("129f"),l=a("14c3");i("search",1,(function(e,t,a){return[function(t){var a=s(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,a):new RegExp(t)[e](String(a))},function(e){var i=a(t,e,this);if(i.done)return i.value;var s=n(e),o=String(this),c=s.lastIndex;r(c,0)||(s.lastIndex=0);var u=l(s,o);return r(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]}))},b2cc:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return l}));var i=a("b775");function n(e){return Object(i["a"])({url:"/app/api/create",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/app/api/list?"+e,method:"get"})}function r(e){return Object(i["a"])({url:"/app/api/"+e,method:"delete"})}function l(e,t){return Object(i["a"])({url:"/app/api/version/"+e,method:"PUT",data:t})}},d3e7:function(e,t,a){"use strict";a("00d3")},f770:function(e,t,a){"use strict";a("05bc")}}]);