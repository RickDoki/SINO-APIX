(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3aa91b4c"],{"13a1":function(e,t,a){"use strict";a.d(t,"f",(function(){return r})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return u}));var i=a("b775");function r(e){return Object(i["a"])({url:"/app/subscribed/list?"+e,method:"get"})}function n(e){return Object(i["a"])({url:"/app/subscribed/"+e,method:"get"})}function s(e){return Object(i["a"])({url:"/app/api/"+e,method:"get"})}function o(e,t){return Object(i["a"])({url:"/app/remove/"+e+"/lease/"+t,method:"delete"})}function l(e){return Object(i["a"])({url:"/app/"+e+"/lessee/list",method:"get"})}function u(e,t){return Object(i["a"])({url:"/app/subscribe/current/list?developerId="+e+"&appCode="+t,method:"get"})}},"1e8f":function(e,t,a){"use strict";a.d(t,"k",(function(){return r})),a.d(t,"g",(function(){return n})),a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"n",(function(){return l})),a.d(t,"h",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"m",(function(){return p})),a.d(t,"c",(function(){return c})),a.d(t,"p",(function(){return m})),a.d(t,"o",(function(){return b})),a.d(t,"b",(function(){return f})),a.d(t,"i",(function(){return h})),a.d(t,"j",(function(){return g})),a.d(t,"l",(function(){return v})),a.d(t,"a",(function(){return w}));var i=a("b775");function r(e){return Object(i["a"])({url:"/app/list"+e,method:"get"})}function n(e){return Object(i["a"])({url:"/app/create",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/app/"+e,method:"delete"})}function o(e,t){return Object(i["a"])({url:"/app/"+e,method:"put",data:t})}function l(e,t){return Object(i["a"])({url:"/app/"+e,method:"put",data:t})}function u(e,t){return Object(i["a"])({url:"/app/"+e+"?developerId="+t,method:"get"})}function d(e){return Object(i["a"])({url:"/app/api/list?"+e,method:"get"})}function p(e,t){return Object(i["a"])({url:"/app/"+e+"/publish",method:"post",data:t})}function c(e,t){return Object(i["a"])({url:"/app/"+e+"/developer/add",method:"post",data:t})}function m(e){return Object(i["a"])({url:"/app/"+e+"/developer/list",method:"get"})}function b(e,t){return Object(i["a"])({url:"/app/"+e+"/developer/delete/"+t,method:"delete"})}function f(e,t,a){return Object(i["a"])({url:"/app/"+e+"/lease/"+t,method:"post",data:a})}function h(){return Object(i["a"])({url:"/app/product/list",method:"get"})}function g(e){return Object(i["a"])({url:"/app/data/statistics",method:"post",data:e})}function v(e){return Object(i["a"])({url:"/app/subscribed/list"+e,method:"get"})}function w(e){return Object(i["a"])({url:"/app/api/list"+e,method:"get"})}},"6c8e":function(e,t,a){},"93a1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app_list_main"},[a("el-dialog",{attrs:{title:"api文档",visible:e.paramsDialogVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){e.paramsDialogVisible=t}}},[a("div",[a("p",[e._v("请求参数:")]),a("vxe-table",{ref:"xTable",attrs:{border:"","show-overflow":"",data:e.requestParams,"edit-config":{trigger:"click",mode:"cell"}}},[a("vxe-table-column",{attrs:{field:"parame",title:"参数","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"type",title:"类型","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"isHaveto",title:"必选","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"describe",title:"描述","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"default",title:"默认值","edit-render":{name:"input"}}})],1),a("vue-context-menu",{attrs:{contextMenuData:e.contextMenuData},on:{savedata:e.savedata,newdata:e.newdata}})],1),a("div",[a("p",[e._v("请求示例:")]),a("prism-editor",{staticClass:"my-editor height-300",attrs:{highlight:e.highlighter,"line-numbers":e.lineNumbers,readonly:e.readonly},model:{value:e.requestExample,callback:function(t){e.requestExample=t},expression:"requestExample"}})],1),a("div",[a("p",[e._v("返回示例:")]),a("prism-editor",{staticClass:"my-editor height-300",attrs:{highlight:e.highlighter,"line-numbers":e.lineNumbers,readonly:e.readonly},model:{value:e.responseExample,callback:function(t){e.responseExample=t},expression:"responseExample"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.paramsDialogVisible=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"编辑",visible:e.editDialogVisible},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"editForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"应用名称:",prop:"appName"}},[a("el-input",{model:{value:e.ruleForm.appName,callback:function(t){e.$set(e.ruleForm,"appName",t)},expression:"ruleForm.appName"}})],1),a("el-form-item",{attrs:{label:"活动形式:",prop:"description"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:15},maxlength:"500"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editSure("ruleForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"文档编辑",visible:e.MKDialogVisible},on:{"update:visible":function(t){e.MKDialogVisible=t}}},[a("mavon-editor",{ref:"md",attrs:{toolbars:e.toolbars,subfield:!1},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.MKDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.MKSure()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加成员",visible:e.USERDialogVisible,width:"40%"},on:{"update:visible":function(t){e.USERDialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form",{ref:"USERForm",staticStyle:{position:"realtive"},attrs:{model:e.USERForm,rules:e.USERrules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"手机号:",prop:"phone"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini"},model:{value:e.USERForm.phone,callback:function(t){e.$set(e.USERForm,"phone",t)},expression:"USERForm.phone"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.USERDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.userAddSure1("USERForm")}}},[e._v("确 定")])],1)],1),a("p",{staticClass:"table_font"},[e._v("应用信息")]),a("el-table",{attrs:{"empty-text":"暂无数据","header-cell-style":{background:"#F0F2F5"},border:"",data:e.appMessage}},[a("el-table-column",{attrs:{align:"center",prop:"appCode",label:"APP Code"}}),a("el-table-column",{attrs:{align:"center",prop:"appName",label:"应用名称"}}),a("el-table-column",{attrs:{align:"center",prop:"creationByUsername",label:"创建者"}}),a("el-table-column",{attrs:{align:"center",prop:"creationDate",label:"创建时间"}}),a("el-table-column",{attrs:{align:"center",prop:"lastUpdatedByUsername",label:"更新者"}}),a("el-table-column",{attrs:{align:"center",prop:"lastUpdateDate",label:"更新时间"}})],1),a("p",{staticClass:"table_font"},[e._v("版本信息")]),a("el-table",{attrs:{"empty-text":"暂无数据","header-cell-style":{background:"#F0F2F5"},border:"",data:e.appVersions}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{attrs:{border:"","header-cell-style":{background:"#F0F2F5"},data:t.row.apiVersionList}},[a("el-table-column",{attrs:{align:"center",prop:"version",label:"当前版本"}}),a("el-table-column",{attrs:{align:"center",prop:"apiName",label:"api名称"}}),a("el-table-column",{attrs:{align:"center",prop:"url",label:"API路径"}}),a("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}}),a("el-table-column",{attrs:{align:"center",prop:"requestMethod",label:"请求方式"}}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEditapi(t.$index,t.row)}}},[e._v("查看文档")])]}}],null,!0)})],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"version",label:"应用版本号"}}),a("el-table-column",{attrs:{align:"center",prop:"description",label:"版本描述"}})],1),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom_button"},[a("div",{staticClass:"newversion",on:{click:e.pushNewVersion}},[e._v("新版本发布")]),a("div",{staticClass:"user",on:{click:e.UserManage}},[e._v("成员管理")]),a("div",{staticClass:"user",on:{click:e.dingyueList}},[e._v("订阅列表")]),a("div",{staticClass:"del",on:{click:e.appDeleted}},[e._v("删除应用")])])]),a("el-drawer",{attrs:{title:"成员管理","before-close":e.handleClosedrawer,visible:e.drawer,direction:"rtl",size:"35%"},on:{"update:visible":function(t){e.drawer=t}}},[a("div",{staticClass:"demo-drawer__content"},[a("el-button",{staticClass:"addUser",attrs:{type:"primary"},on:{click:function(t){return e.userAddSure("USERForm")}}},[e._v(" + 添加成员 ")]),a("el-table",{staticStyle:{width:"90%",margin:"0 auto"},attrs:{data:e.usertable,"header-cell-style":{background:"#F0F2F5"},stripe:""}},[a("el-table-column",{attrs:{prop:"developerName",label:"成员名称"}}),a("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deletdUser(t.row)}}},[e._v("删除")])]}}])})],1)],1)]),a("el-drawer",{attrs:{title:"订阅列表","before-close":e.handleClosedrawerList,visible:e.drawerList,direction:"rtl",size:"35%"},on:{"update:visible":function(t){e.drawerList=t}}},[a("div",{staticClass:"demo-drawer__content",staticStyle:{padding:"10px"}},[a("el-table",{attrs:{"empty-text":"暂无数据","header-cell-style":{background:"#F0F2F5"},border:"",data:e.dingyueLsit}},[a("el-table-column",{attrs:{prop:"creationByUsername",label:"订阅人"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{prop:"isPublished",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"mini",type:e.status[t.row.isPublished][0]}},[e._v(" "+e._s(e.status[t.row.isPublished][1])+" ")])]}}])})],1)],1)]),a("el-drawer",{attrs:{title:"API文档","before-close":e.handleClosedrawerapi,visible:e.drawerapi,direction:"rtl",size:"45%"},on:{"update:visible":function(t){e.drawerapi=t}}},[a("div",{staticClass:"demo-drawer__content",staticStyle:{padding:"20px"}},[a("div",[a("p",[e._v("请求参数:")]),a("vxe-table",{ref:"xTable",attrs:{border:"","show-overflow":"",data:e.requestParams,"edit-config":{trigger:"click",mode:"cell"}}},[a("vxe-table-column",{attrs:{field:"parame",title:"参数","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"type",title:"类型","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"isHaveto",title:"必选","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"describe",title:"描述","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"default",title:"默认值","edit-render":{name:"input"}}})],1),a("vue-context-menu",{attrs:{contextMenuData:e.contextMenuData},on:{savedata:e.savedata,newdata:e.newdata}})],1),a("div",[a("p",[e._v("请求示例:")]),a("prism-editor",{staticClass:"my-editor height-300",attrs:{highlight:e.highlighter,"line-numbers":e.lineNumbers,readonly:e.readonly},model:{value:e.requestExample,callback:function(t){e.requestExample=t},expression:"requestExample"}})],1),a("div",[a("p",[e._v("返回示例:")]),a("prism-editor",{staticClass:"my-editor height-300",attrs:{highlight:e.highlighter,"line-numbers":e.lineNumbers,readonly:e.readonly},model:{value:e.responseExample,callback:function(t){e.responseExample=t},expression:"responseExample"}})],1)])])],1)},r=[],n=a("1da1"),s=(a("159b"),a("d3b7"),a("96cf"),a("1e8f")),o=a("13a1"),l=a("b2d8"),u=a("5f87"),d=(a("64e1"),a("e57a")),p=(a("cabf"),a("8c7a")),c=(a("cb55"),a("416b"),a("84bf"),{components:{mavonEditor:l["mavonEditor"],PrismEditor:d["a"]},data:function(){return{drawerList:!1,drawer:!1,drawerapi:!1,dingyueLsit:[],content:"",readonly:!0,lineNumbers:!0,requestExample:"",responseExample:"",status:{60001:["info","未启用"],60005:["success","已启用"],60002:["success","已上架"],60003:["danger","异常中"],60004:["warning","已停用"]},requestParams:[{parame:"name",type:"String",isHaveto:"必选",describe:"描述",default:"默认值"}],paramsDialogVisible:!1,radio:[],toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!1,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},rules:{appName:[{required:!0,message:"应用名称不能为空",trigger:"change"}]},appVrules:{appVersion:[{required:!0,message:"版本不能为空",trigger:"change"}]},ruleForm:{appName:"",description:""},appVForm:{appVersion:"",versionDesc:"",apiVersionIds:""},USERForm:{username:"",phone:""},USERrules:{username:[{required:!0,message:"用户名不能为空",trigger:"change"}],phone:[{required:!0,message:"手机号不能为空",trigger:"change"}]},appList:{},appMessage:[],appVersions:[],usingAppList:[],editDialogVisible:!1,appCode:"",appVDialogVisible:!1,apiList:[],currentPage:1,total:0,apiVersionIds:"",MKDialogVisible:!1,USERDialogVisible:!1,usertable:[],developerId:"",contextMenuData:{menuName:"demo",axis:{x:null,y:null},menulists:[{fnHandler:"savedata",icoName:"fa fa-home fa-fw",btnName:"新增一行"},{fnHandler:"newdata",icoName:"fa fa-home fa-fw",btnName:"删除选中 "}]}}},created:function(){var e=Object(u["a"])("userId_api");this.developerId=e,this.appCode=this.$route.query.appCode,this.getMessageList(this.appCode,e),this.getAPIlist(1)},methods:{highlighter:function(e){return Object(p["highlight"])(e,p["languages"].js)},handleClosedrawer:function(){this.drawer=!1},handleClosedrawerapi:function(){this.drawerapi=!1},handleClosedrawerList:function(){this.drawerList=!1},insertEvent:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,i,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=-1,i=e.$refs.xTable,r={parame:"",type:"",isHaveto:"",describe:"",default:""},t.next=5,i.insertAt(r,a);case 5:return n=t.sent,s=n.row,t.next=9,i.setActiveCell(s,"parame");case 9:case"end":return t.stop()}}),t)})))()},showMenu:function(){event.preventDefault();var e=event.clientX,t=event.clientY;this.contextMenuData.axis={x:e,y:t}},savedata:function(){this.insertEvent()},newdata:function(){this.$refs.xTable.removeCheckboxRow()},getMessageList:function(e,t){var a=this;Object(s["h"])(e,t).then((function(e){a.appList=e.data,a.appMessage.push({appCode:e.data.appCode,creationByUsername:e.data.appCreationUser,creationDate:e.data.appCreationDate,lastUpdatedByUsername:e.data.appLastUpdateUser,lastUpdateDate:e.data.appLastUpdateDate,isPublished:e.data.isPublished,appName:e.data.appName,appDescription:e.data.appDescription}),a.ruleForm={appName:e.data.appName,description:e.data.appDescription},a.appVersions=e.data.appVersions,a.usingAppList=e.data.usingAppList,a.content=e.data.appMarkdown}))},getAPIlist:function(e){var t=this,a="developerId="+this.developerId;Object(s["d"])(a).then((function(e){t.apiList=e.data.apiList,t.total=e.data.total;for(var a=0;a<t.apiList.length;a++)t.radio.push("")}))},backList:function(){this.$router.push("/app/list")},handleEdit:function(e){this.editDialogVisible=!0},handleEditapi:function(e,t){var a=this;console.log(t),Object(o["a"])(t.apiId).then((function(e){a.requestExample=JSON.parse(e.data.requestExample),a.requestParams=JSON.parse(e.data.requestParams),a.responseExample=JSON.parse(e.data.responseExample)})),this.drawerapi=!0},editSure:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(s["n"])(t.appCode,t.ruleForm).then((function(e){200===e.code?(t.messageOK(e.msg),t.editDialogVisible=!1):(t.messageERROR(e.msg),t.editDialogVisible=!1)}))}))},pushNewVersion:function(){this.$router.push({path:"/app/newVersion?appcode="+this.appCode})},handleSelectionChange:function(e){console.log(e);var t=[];e.forEach((function(e){t.push(e.versionId)})),this.appVForm.apiVersionIds=t.toString()},handleCurrentChange:function(e){this.currentPage=e,this.getAPIlist(e)},newVSure:function(e){for(var t=this,a=[],i=0;i<this.radio.length;i++)""!==this.radio[i]&&a.push(this.radio[i]);var r=a.toString();this.$refs[e].validate((function(e){return!!e&&(""===r?(t.messageERROR("至少需要选择一个api版本"),!1):(t.appVForm.apiVersionIds=r,void Object(s["m"])(t.appCode,t.appVForm).then((function(e){200===e.code?t.messageOK(e.msg):t.messageERROR(e.msg),t.appVDialogVisible=!1,t.getMessageList(t.appCode,"5")}))))}))},MKedit:function(){this.MKDialogVisible=!0},MKSure:function(){var e=this;console.log(this.content);var t={markdown:this.content};Object(s["f"])(this.appCode,t).then((function(t){200===t.code?e.messageOK(t.msg):e.messageERROR(t.msg),e.MKDialogVisible=!1}))},UserManage:function(){this.getUserList(),this.drawer=!0},dingyueList:function(){var e=this;this.drawerList=!0,Object(o["e"])(Object(u["a"])("userId_api"),this.appCode).then((function(t){e.dingyueLsit=t.data}))},getUserList:function(){var e=this;Object(s["p"])(this.appCode).then((function(t){e.usertable=t.data}))},userAddSure1:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(s["c"])(t.appCode,t.USERForm).then((function(e){200===e.code?(t.messageOK(e.msg),t.USERDialogVisible=!1):t.messageERROR(e.msg),t.getUserList(),t.USERForm={username:"",phone:""}}))}))},userAddSure:function(){this.USERDialogVisible=!0},deletdUser:function(e){var t=this;Object(s["o"])(this.appCode,e.developerId).then((function(e){200===e.code?t.messageOK(e.msg):t.messageERROR(e.msg),t.getUserList()}))},appDeleted:function(){var e=this;this.$confirm("确认是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["e"])(e.appCode).then((function(t){200===t.code?(e.messageOK(t.msg),e.$router.push("/app/list")):e.messageERROR(t.msg)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},messageOK:function(e){this.$message({message:e,type:"success"})},messageERROR:function(e){this.$message({message:e,type:"error"})}}}),m=c,b=(a("d24c"),a("2877")),f=Object(b["a"])(m,i,r,!1,null,"4f63eceb",null);t["default"]=f.exports},d24c:function(e,t,a){"use strict";a("6c8e")}}]);