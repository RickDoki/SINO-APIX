(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4eca762"],{"080b":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("div",{class:["json-view-container",e.theme]},[a("div",{class:["json-view",e.length?"closeable":""],style:{fontSize:e.fontSize+"px",lineHeight:e.lineHeight+"px"}},[e.length&&"square"===e.iconStyle?a("span",{staticClass:"angle",on:{click:e.toggleClose}},[e.innerclosed?a("svg",{staticStyle:{"vertical-align":"middle",color:"rgb(42, 161, 152)",height:"1em",width:"1em"},attrs:{fill:e.iconColors[0],width:"1em",height:"1em",viewBox:"0 0 1792 1792"}},[a("path",{attrs:{d:"M1344 800v64q0 14-9 23t-23 9h-352v352q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-352h-352q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h352v-352q0-14 9-23t23-9h64q14 0 23 9t9 23v352h352q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"}})]):e._e(),e.innerclosed?e._e():a("svg",{staticStyle:{"vertical-align":"middle",color:"rgb(88, 110, 117)",height:"1em",width:"1em"},attrs:{fill:e.iconColors[1],width:"1em",height:"1em",viewBox:"0 0 1792 1792"}},[a("path",{attrs:{d:"M1344 800v64q0 14-9 23t-23 9h-832q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h832q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"}})])]):e._e(),e.length&&"circle"===e.iconStyle?a("span",{staticClass:"angle",on:{click:e.toggleClose}},[e.innerclosed?e._e():a("svg",{staticStyle:{"vertical-align":"middle",color:"rgb(1, 160, 228)",height:"1em",width:"1em"},attrs:{viewBox:"0 0 24 24",fill:e.iconColors[0],preserveAspectRatio:"xMidYMid meet"}},[a("path",{attrs:{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,13H17V11H7"}})]),e.innerclosed?a("svg",{staticStyle:{"vertical-align":"middle",color:"rgb(161, 106, 148)",height:"1em",width:"1em"},attrs:{viewBox:"0 0 24 24",fill:e.iconColors[1],preserveAspectRatio:"xMidYMid meet"}},[a("path",{attrs:{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"}})]):e._e()]):e._e(),e.length&&"triangle"===e.iconStyle?a("span",{staticClass:"angle",on:{click:e.toggleClose}},[e.innerclosed?e._e():a("svg",{staticStyle:{"vertical-align":"top",color:"#3c4047",height:"1em",width:"1em","padding-left":"2px"},attrs:{viewBox:"0 0 15 15",fill:e.iconColors[0]}},[a("path",{attrs:{d:"M0 5l6 6 6-6z"}})]),e.innerclosed?a("svg",{staticStyle:{"vertical-align":"top",color:"#3c4047",height:"1em",width:"1em","padding-left":"2px"},attrs:{viewBox:"0 0 15 15",fill:e.iconColors[1]}},[a("path",{attrs:{d:"M0 14l6-6-6-6z"}})]):e._e()]):e._e(),a("div",{staticClass:"content-wrap"},[a("p",{class:["first-line",e.length>0?"pointer":""],on:{click:e.toggleClose}},[e.jsonKey?a("span",{staticClass:"json-key"},[e._v('"'+e._s(e.jsonKey)+'": ')]):e._e(),e.length?a("span",[e._v(e._s(e.prefix)+e._s(e.innerclosed?"..."+e.subfix:"")+" ")]):e._e(),e.length?e._e():a("span",[e._v(e._s((e.isArray?"[]":"{}")+(e.isLast?"":",")))])]),!e.innerclosed&&e.length?a("div",{staticClass:"json-body"},[e._l(e.items,(function(t,i){return[t.isJSON?a("json-view",{key:i,attrs:{closed:e.isClose(e.templateDeep+1),data:t.value,jsonKey:t.key,currentDeep:e.templateDeep+1,deep:e.deep,iconStyle:e.iconStyle,theme:e.theme,fontSize:e.fontSize,lineHeight:e.lineHeight,iconColor:e.iconColors,isLast:i===e.items.length-1,hasSiblings:t.hasSiblings}}):a("p",{key:i,staticClass:"json-item"},[a("span",{staticClass:"json-key"},[e._v(" "+e._s(e.isArray?"":'"'+t.key+'":')+" ")]),a("span",{class:["json-value",e.getDataType(t.value)]},[e._v(" "+e._s(("string"===e.getDataType(t.value)?'"':"")+t.value+("string"===e.getDataType(t.value)?'"':"")+(i===e.items.length-1?"":","))+" ")])])]})),e.innerclosed?e._e():a("span",{staticClass:"base-line"})],2):e._e(),e.innerclosed?e._e():a("p",{staticClass:"last-line"},[a("span",[e._v(e._s(e.subfix))])])])])]):e._e()},n=[],s=(a("a9e3"),a("b64b"),a("d81d"),a("fb6a"),a("d3b7"),a("caad"),a("2532"),{name:"jsonView",props:{data:{type:[Object,Array],required:!0},jsonKey:{type:String,default:""},closed:{type:Boolean,default:!1},isLast:{type:Boolean,default:!0},fontSize:{type:Number,default:14},lineHeight:{type:Number,default:24},deep:{type:Number,default:3},currentDeep:{type:Number,default:1},iconStyle:{type:String,default:"square"},iconColor:{type:Array,default:function(){return[]}},theme:{type:String,default:""},hasSiblings:{type:Boolean,default:!0}},data:function(){return{innerclosed:!0,templateDeep:1,visible:this.currentDeep<4}},computed:{isArray:function(){return"array"===this.getDataType(this.data)},length:function(){return this.isArray?this.data.length:Object.keys(this.data).length},subfix:function(){var e=this.data;return this.isEmptyArrayOrObject(e)?"":(this.isArray?"]":"}")+(this.isLast?"":",")},prefix:function(){return this.isArray?"[":"{"},items:function(){var e=this,t=this.data;return this.isArray?t.map((function(t){var a=e.isObjectOrArray(t);return{value:t,isJSON:a,key:""}})):Object.keys(t).map((function(a){var i=t[a],n=e.isObjectOrArray(i);return{value:i,isJSON:n,key:a}}))},iconColors:function(){var e=this.theme,t=this.iconColor;return 2===t.length?t:"one-dark"===e?["#747983","#747983"]:"vs-code"===e?["#c6c6c6","#c6c6c6"]:["#747983","#747983"]}},mounted:function(){var e=this;this.innerclosed=this.closed,this.templateDeep=this.currentDeep,setTimeout((function(){e.visible=!0}),0)},methods:{getDataType:function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},isObjectOrArray:function(e){return["array","object"].includes(this.getDataType(e))},toggleClose:function(){0!==this.length&&(this.innerclosed?this.innerclosed=!1:this.innerclosed=!0)},isClose:function(e){return e>this.deep},isEmptyArrayOrObject:function(e){return[{},[]].map((function(e){return JSON.stringify(e)})).includes(JSON.stringify(e))}},watch:{closed:function(){this.innerclosed=this.closed}}}),r=s,l=r,o=(a("e055"),a("2877")),c=Object(o["a"])(l,i,n,!1,null,"5c4aa56a",null);t["a"]=c.exports},"2c8d":function(e,t,a){"use strict";a("6d88")},"2df9":function(e,t,a){"use strict";a("a8c7")},"63b0":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:"插件详情",visible:e.drawer,direction:e.direction,"before-close":e.handleClose,size:"50%"},on:{"update:visible":function(t){e.drawer=t}}},[a("span",[e._v("查看详情")])])},n=[],s={props:["drawerProps"],watch:{drawerProps:function(){this.drawer=this.drawerProps}},data:function(){return{drawer:!1,direction:"rtl"}},methods:{handleClose:function(e){e(),this.$emit("showChange",!1)}}},r=s,l=a("2877"),o=Object(l["a"])(r,i,n,!1,null,null,null);t["a"]=o.exports},"679f":function(e,t,a){},"6d88":function(e,t,a){},a1ad:function(e,t,a){"use strict";a.d(t,"u",(function(){return n})),a.d(t,"g",(function(){return s})),a.d(t,"v",(function(){return r})),a.d(t,"s",(function(){return l})),a.d(t,"t",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"n",(function(){return p})),a.d(t,"h",(function(){return d})),a.d(t,"a",(function(){return h})),a.d(t,"p",(function(){return g})),a.d(t,"e",(function(){return f})),a.d(t,"x",(function(){return b})),a.d(t,"k",(function(){return v})),a.d(t,"w",(function(){return m})),a.d(t,"c",(function(){return C})),a.d(t,"m",(function(){return _})),a.d(t,"q",(function(){return y})),a.d(t,"r",(function(){return w})),a.d(t,"o",(function(){return j})),a.d(t,"j",(function(){return x})),a.d(t,"i",(function(){return O})),a.d(t,"l",(function(){return q})),a.d(t,"f",(function(){return L}));var i=a("b775");function n(e){return Object(i["a"])({url:"/app/list?"+e,method:"get"})}function s(e){return Object(i["a"])({url:"/app/create",method:"post",data:e})}function r(e,t){return Object(i["a"])({url:"/app/"+e,method:"put",data:t})}function l(e){return Object(i["a"])({url:"/app/"+e,method:"delete"})}function o(e){return Object(i["a"])({url:"/app/"+e,method:"get"})}function c(e){return Object(i["a"])({url:"/app/data/"+e+"/appNum",method:"post"})}function u(e){return Object(i["a"])({url:"/app/api/list?developerId="+e,method:"get"})}function p(e,t){return Object(i["a"])({url:"/app/"+e+"/publish",method:"post",data:t})}function d(e){return Object(i["a"])({url:"/app/appVersion/"+e,method:"delete"})}function h(e){return Object(i["a"])({url:"/app/subscribed/list?"+e,method:"get"})}function g(e){return Object(i["a"])({url:"/app/api/queryApiList",method:"post",data:e})}function f(e,t){return Object(i["a"])({url:"/app/appVersion/"+e,method:"post",data:t})}function b(e){return Object(i["a"])({url:"/app/appVersion/"+e,method:"get"})}function v(e){return Object(i["a"])({url:"/gateway/log?"+e,method:"get"})}function m(e){return Object(i["a"])({url:"/app/subscribed/"+e,method:"get"})}function C(e){return Object(i["a"])({url:"/app/api/"+e,method:"get"})}function _(e){return Object(i["a"])({url:"/app/plugin",method:"post",data:e})}function y(){return Object(i["a"])({url:"/app/plugin/randomKey",method:"get"})}function w(e){return Object(i["a"])({url:"/app/rateLimit/save",method:"post",data:e})}function j(e){return Object(i["a"])({url:"/app/plugin",method:"put",data:e})}function x(e){return Object(i["a"])({url:"/app/unSubscribe/"+e,method:"post"})}function O(e,t){return Object(i["a"])({url:"/app/plugin/"+e+"/"+t,method:"get"})}function q(e){return Object(i["a"])({url:"/app/rateLimit/open?appId="+e,method:"post"})}function L(e){return Object(i["a"])({url:"/app/rateLimit/close?appId="+e,method:"post"})}},a506:function(e,t,a){"use strict";a("679f")},a8c7:function(e,t,a){},e055:function(e,t,a){"use strict";a("fd19")},f77e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"he_height"},[a("div",{staticClass:"list_top"},[a("div",{staticClass:"list_title"},[e._v(e._s(e.serveAllMeaasge.appName))]),a("div",{staticClass:"list_search"},[a("el-button",{staticClass:"td-but",attrs:{type:"primary",size:"small"},on:{click:e.unSubscribe}},[e._v("退订")])],1)]),a("div",{staticClass:"secondTitle"},[e._v(e._s(e.serveAllMeaasge.appDescription))]),a("div",{staticClass:"status"},[e._m(0),a("div",{staticClass:"time"},[a("div",[a("span",[e._v("发布时间 : ")]),a("span",[e._v(e._s(e.serveAllMeaasge.appPublishDate))])]),a("div",[a("span",[e._v("订阅时间 : ")]),a("span",[e._v(e._s(e.serveAllMeaasge.subscribeDate))])])])]),a("div",{staticClass:"tabsMessage"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"API详情",name:"first"}},[a("api-detail",{attrs:{list:e.versionList,defaultApiList:e.apiList,gatewayDomain:e.serveAllMeaasge.gatewayDomain},on:{changeVersion:e.changeVersion}})],1),a("el-tab-pane",{attrs:{label:"插件详情",name:"second"}},[a("plug-in")],1)],1)],1)])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left-span"},[a("span",[e._v("服务商 : ")]),e._v(" "),a("span",[e._v(" 博冀信息")])])}],s=(a("fcb4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"he_main"},[a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{staticStyle:{height:"100%"},attrs:{span:4}},[a("div",{staticClass:"apiList"},[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.apiValueChange},model:{value:e.apiValue,callback:function(t){e.apiValue=t},expression:"apiValue"}},e._l(e.list,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._l(e.defaultApiList,(function(t,i){return a("p",{key:i,class:e.classList[i],on:{click:function(a){return e.choseApi(t,i)}}},[e._v(" "+e._s(t.apiName)+" ")])}))],2)]),a("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[a("div",{staticClass:"apiMessage"},[a("div",{staticClass:"api-info"},[a("div",{staticClass:"title"},[e._v(e._s(e.apiMessageAll.apiName))]),a("div",{staticClass:"secondTitle"},[e._v(e._s(e.apiMessageAll.description))])]),a("div",{staticClass:"api-info"},[a("span",{staticClass:"label-color"},[e._v("调用路径 : ")]),a("span",{staticClass:"conten-color"},[e._v(e._s(e.gatewayDomain+e.apiMessageAll.url))]),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.gatewayDomain+e.apiMessageAll.url,expression:"gatewayDomain + apiMessageAll.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-copy-document icon-color"})]),a("div",{staticClass:"api-info"},[a("span",{staticClass:"label-color agrement"},[e._v("协议类型 : ")]),a("span",{staticClass:"conten-color"},[e._v(e._s(e.apiMessageAll.protocol))])]),a("div",{staticClass:"api-info"},[a("span",{staticClass:"label-color"},[e._v("请求方式 : ")]),a("span",{staticClass:"conten-color"},[e._v(e._s(e.apiMessageAll.requestMethod))])]),a("div",{staticClass:"api-info"},[a("span",{staticClass:"label-color"},[e._v("请求参数 : ")]),a("div",{staticClass:"table_box table_top"},[a("el-table",{attrs:{data:e.table,"empty-text":"暂无数据","row-style":{height:"50px"},"highlight-current-row":"","header-cell-style":{"font-weight":400,color:"#494E6A"}}},[a("el-table-column",{attrs:{prop:"parame",label:"名称"}}),a("el-table-column",{attrs:{prop:"type",label:"类型"}}),a("el-table-column",{attrs:{prop:"isHaveto",label:"是否必选"}}),a("el-table-column",{attrs:{prop:"describe",label:"描述"}}),a("el-table-column",{attrs:{prop:"default",label:"默认值"}})],1)],1)]),a("div",{staticClass:"api-info"},[a("span",{staticClass:"label-color"},[e._v("状态码 : ")]),a("div",{staticClass:"table_box table_top"},[a("el-table",{attrs:{data:e.statusTable,"empty-text":"暂无数据","row-style":{height:"50px"},"highlight-current-row":"","header-cell-style":{"font-weight":400,color:"#494E6A"}}},[a("el-table-column",{attrs:{prop:"statusCode",label:"状态码",width:"200"}}),a("el-table-column",{attrs:{prop:"describe",label:"描述"}})],1)],1)])])])],1)],1)}),r=[],l=a("a1ad"),o={data:function(){return{table:[],apiOptions:[],apiValue:"",classList:[],appCode:"",apiMessageAll:{},statusTable:[{statusCode:200,describe:"操作成功"},{statusCode:400,describe:"操作失败"}]}},props:["list","defaultApiList","gatewayDomain"],created:function(){this.appCode=this.$route.params.appCode},mounted:function(){},methods:{choseApi:function(e,t){this.classList=[];for(var a=0;a<this.defaultApiList.length;a++)a===t?this.classList.push("hitClass"):this.classList.push("nohit");console.log(e);var i=e.apiId;this.getapiMessage(i)},getapiMessage:function(e){var t=this;Object(l["c"])(e).then((function(e){200===e.code&&(t.apiMessageAll=e.data,t.table=JSON.parse(e.data.requestParams),console.log(t.table))}))},apiValueChange:function(){var e=this,t={appCode:this.appCode,appVersionId:this.apiValue};Object(l["p"])(t).then((function(t){200===t.code&&e.$emit("changeVersion",t.data.apiList)}))},onCopy:function(){this.$message("复制成功")},onError:function(){this.$message("复制失败")}},watch:{list:function(){this.apiValue=this.list[0].value},defaultApiList:function(){this.classList=[];for(var e=0;e<this.defaultApiList.length;e++)0===e?this.classList.push("hitClass"):this.classList.push("nohit");console.log(this.defaultApiList);var t=this.defaultApiList[0].apiId;this.getapiMessage(t)}}},c=o,u=(a("2df9"),a("2877")),p=Object(u["a"])(c,s,r,!1,null,"243844d5",null),d=p.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"plug-in auto"},[a("el-drawer",{attrs:{title:"日志详情",visible:e.drawer,direction:e.direction,"before-close":e.handleClose,size:"50%"},on:{"update:visible":function(t){e.drawer=t}}},[a("json-view",{attrs:{data:this.historylist,theme:"index",deep:2,fontSize:12}})],1),a("div",{staticClass:"table_box mode-margin"},[a("p",[e._v("已添加插件")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.versionLoading,expression:"versionLoading"}],attrs:{data:e.pluginsTable,"empty-text":"暂无数据","row-style":{height:"50px"},"highlight-current-row":"","header-cell-style":{"font-weight":400,"font-size":"16px",color:"#1D1C35"}}},[a("el-table-column",{attrs:{prop:"appName",label:"插件名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(" "+e._s(e._f("plugName")(t.row.pluginType))+" ")])]}}])}),a("el-table-column",{attrs:{prop:"appCode",label:"启用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:0===t.row.enabled?"noenable":"enabled"},[e._v(" "+e._s(0===t.row.enabled?"未启用":"已启用")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.getPluginMessage(t.row)}}},[e._v("查看")])]}}])})],1)],1),a("div",{staticClass:"table_box mode-margin"},[e._m(0),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.requestLoding,expression:"requestLoding"}],attrs:{data:e.requestTable,"empty-text":"暂无数据","row-style":{height:"50px"},"highlight-current-row":"","header-cell-style":{"font-weight":400,"font-size":"16px",color:"#1D1C35"}}},[a("el-table-column",{attrs:{prop:"requestUri",label:"请求地址",width:"280px"}}),a("el-table-column",{attrs:{prop:"httpMethod",label:"请求方式"}}),a("el-table-column",{attrs:{prop:"remoteIp",label:"客户端IP"}}),a("el-table-column",{attrs:{prop:"serverIp",label:"服务端IP"}}),a("el-table-column",{attrs:{prop:"consumingTime",label:"耗时(ms)"}}),a("el-table-column",{attrs:{label:"调用时间",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.eventTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.getlogs(t.row)}}},[e._v("查看")])]}}])})],1),a("el-pagination",{staticClass:"list-pagination",attrs:{background:"","current-page":e.currentPageRequest,layout:"prev, pager, next",total:e.totalRequest},on:{"update:currentPage":function(t){e.currentPageRequest=t},"update:current-page":function(t){e.currentPageRequest=t},"current-change":e.handleCurrentChangeRequest}})],1),a("div",{staticClass:"table_box mode-margin"},[e._m(1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.errorLoading,expression:"errorLoading"}],attrs:{data:e.ErrorTable,"row-style":{height:"50px"},"highlight-current-row":"","header-cell-style":{"font-weight":400,"font-size":"16px",color:"#1D1C35"}}},[a("el-table-column",{attrs:{prop:"requestUri",label:"请求地址",width:"280px"}}),a("el-table-column",{attrs:{prop:"httpMethod",label:"请求方式"}}),a("el-table-column",{attrs:{prop:"remoteIp",label:"客户端IP"}}),a("el-table-column",{attrs:{prop:"serverIp",label:"服务端IP"}}),a("el-table-column",{attrs:{prop:"consumingTime",label:"耗时(ms)"}}),a("el-table-column",{attrs:{label:"调用时间",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.eventTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.getlogs(t.row)}}},[e._v("查看")])]}}])})],1),a("el-pagination",{staticClass:"list-pagination",attrs:{background:"","current-page":e.currentPageError,layout:"prev, pager, next",total:e.totalError},on:{"update:currentPage":function(t){e.currentPageError=t},"update:current-page":function(t){e.currentPageError=t},"current-change":e.handleCurrentChangeError}})],1),a("plugins-message",{attrs:{drawerProps:e.drawerIsshow},on:{showChange:e.showChange}})],1)},g=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"serve-table"},[a("div",{staticClass:"table-tilelong"},[e._v("请求日志")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"serve-table"},[a("div",{staticClass:"table-tilelong"},[e._v("错误日志")])])}],f=a("080b"),b=a("63b0"),v={components:{jsonView:f["a"],pluginsMessage:b["a"]},filters:{plugName:function(e){var t={jwt:"Jwt-auth",base_auth:"basic_auth",oauth2:"OAuth2.0",black_list_ip:"IP 黑名单控制",white_list_ip:"IP 白名单控制",cors:"cors跨域",sign:"防篡改签名",replay_attacks:"防网络重放攻击",error_log:"error log",http_log:"http log",sentinel:"sentinel",gzip:"gzip",proxy_cache:"proxy_cache",real_ip:"real_ip",response_rewrite:"response-rewrite"};return e?t[e]:""}},data:function(){return{drawerIsshow:!1,historylist:{},direction:"rtl",drawer:!1,ErrorTable:[],pluginsTable:[],appCode:"",versionLoading:!1,appId:"",requestLoding:!1,requestTable:[],currentPageRequest:1,totalRequest:0,errorLoading:!1,currentPageError:1,totalError:0}},created:function(){this.appCode=this.$route.params.appCode,this.getServeDeatil(),this.getLog("request"),this.getLog("error")},methods:{getPluginMessage:function(){this.drawerIsshow=!0},showChange:function(){this.drawerIsshow=!1},handleClose:function(e){e()},getlogs:function(e){this.drawer=!0,this.historylist=e},getServeDeatil:function(){var e=this;this.versionLoading=!0,Object(l["t"])(this.appCode).then((function(t){200===t.code&&(e.versionLoading=!1,e.appId=t.data.appId,e.pluginsTable=t.data.plugins)}))},enabledChange:function(e){var t=this;if("sentinel"===e.pluginType)0===e.enabled?Object(l["l"])(e.appId).then((function(a){if(200===a.code){var i={appId:e.appId,appCode:e.appCode,pluginType:e.pluginType,enabled:e.enabled,id:e.id};Object(l["o"])(i).then((function(e){200===e.code&&t.getServeDeatil()}))}})):Object(l["f"])(e.appId).then((function(a){if(200===a.code){var i={appId:e.appId,appCode:e.appCode,pluginType:e.pluginType,enabled:e.enabled,id:e.id};Object(l["o"])(i).then((function(e){200===e.code&&t.getServeDeatil()}))}}));else{var a={appId:e.appId,appCode:e.appCode,pluginType:e.pluginType,enabled:e.enabled,id:e.id};Object(l["o"])(a).then((function(e){200===e.code&&t.getServeDeatil()}))}},pluginConfig:function(e){console.log(e),this.$router.push("/serve/serveDetail/pluginConfig/"+e.pluginType+"?appcode="+e.appCode+"&appid="+e.appId+"&id="+e.id+"&pluginParams=true")},getLog:function(e){var t=this;if("request"===e){this.requestLoding=!0;var a="appCode="+this.appCode+"&limit=10&offset="+this.currentPageRequest+"&statusCode=200";Object(l["k"])(a).then((function(e){200===e.code&&(t.requestTable=e.data.logList,t.requestLoding=!1,t.totalRequest=e.data.total)}))}else{var i="appCode="+this.appCode+"&limit=10&offset="+this.currentPageError+"&statusCode=500";this.errorLoading=!0,Object(l["k"])(i).then((function(e){200===e.code&&(t.errorLoading=!1,t.ErrorTable=e.data.logList,t.totalError=e.data.total)}))}},handleCurrentChangeRequest:function(e){this.currentPageRequest=e,this.getLog("request")},handleCurrentChangeError:function(e){this.currentPageError=e,this.getLog("error")},goConfig:function(e){return"jwt"===e||"oauth2"===e||"black_list_ip"===e||"white_list_ip"===e||"cors"===e||"sign"===e||"sentinel"===e}}},m=v,C=(a("a506"),Object(u["a"])(m,h,g,!1,null,"80e80278",null)),_=C.exports,y={data:function(){return{activeName:"first",appCode:"",serveAllMeaasge:{},loading:!1,versionList:[],apiList:[]}},created:function(){this.appCode=this.$route.params.appCode,this.getSubscribed()},components:{apiDetail:d,plugIn:_},methods:{handleClick:function(){},getSubscribed:function(){var e=this;this.loading=!0,Object(l["w"])(this.appCode).then((function(t){if(200===t.code){e.loading=!1,e.serveAllMeaasge=t.data,e.versionList=[];for(var a=0;a<t.data.appVersion.length;a++)e.versionList.push({label:t.data.appVersion[a].version,value:t.data.appVersion[a].id});e.apiList=t.data.appVersion[0].apiList}}))},changeVersion:function(e){this.apiList=e},unSubscribe:function(){var e=this;this.$confirm("确认退订服务"+this.serveAllMeaasge.appName+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["j"])(e.appCode).then((function(t){200===t.code&&e.$router.push({path:"/serve/subscribe"})}))})).catch((function(){}))}}},w=y,j=(a("2c8d"),Object(u["a"])(w,i,n,!1,null,"fc718982",null));t["default"]=j.exports},fcb4:function(e,t,a){},fd19:function(e,t,a){}}]);