(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d71a252"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},1915:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"list_top list_top_bom"},[a("div",{staticClass:"list_title"},[t._v("API列表")]),a("div",{staticClass:"list_search"},[a("el-input",{staticClass:"list_searchInput",attrs:{"suffix-icon":"el-icon-search",size:"small",placeholder:"请输入API名称"},on:{change:function(e){return t.search()}},model:{value:t.APIName,callback:function(e){t.APIName=e},expression:"APIName"}}),a("el-date-picker",{staticClass:"list_searchInput_date",attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","value-format":"timestamp","default-time":["00:00:00","23:59:59"]},on:{change:function(e){return t.search()}},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.goApicreate}},[t._v("添加新API")])],1)]),a("div",{staticClass:"table_box"},[a("el-table",{attrs:{"row-style":{height:"50px"},data:t.tableData,"highlight-current-row":"","header-cell-style":{"font-weight":400,"font-size":"16px",color:"#1D1C35"}}},[a("el-table-column",{attrs:{prop:"apiName",label:"API名称","show-overflow-tooltip":"","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"text_detail",on:{click:function(a){return t.gotoDteail(e.row)}}},[t._v(t._s(e.row.apiName))])]}}])}),a("el-table-column",{attrs:{prop:"requestMethod",label:"请求方式",align:"center"}}),a("el-table-column",{attrs:{prop:"domain",label:"域名","show-overflow-tooltip":"","min-width":"250"}}),a("el-table-column",{attrs:{prop:"apiUrl",label:"路径","show-overflow-tooltip":"","min-width":"200"}}),a("el-table-column",{attrs:{prop:"description",label:"API描述","show-overflow-tooltip":"","min-width":"200"}}),a("el-table-column",{attrs:{label:"操作","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.gotoDteail(e.row)}}},[t._v("查看")]),a("span",{staticClass:"handle"},[t._v("|")]),a("el-button",{staticClass:"textBut-danger",attrs:{type:"text"},on:{click:function(a){return t.delAPI(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"list-pagination",attrs:{background:"","current-page":t.page,layout:"prev, pager, next",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.handleCurrentChange}})],1)])},n=[],s=(a("ac1f"),a("841c"),a("b2cc")),o=a("5f87"),r={components:{},data:function(){return{APIName:"",value1:[],tableData:[],total:0,developerId:"",page:1,size:10}},created:function(){this.developerId=Object(o["a"])("userId_api");var t="limit="+this.size+"&offset="+this.page+"&developerId="+this.developerId;this.getList(t)},methods:{gotoDteail:function(t){this.$router.push({path:"/api/detail/"+t.apiId})},delAPI:function(t){var e=this;this.$confirm("确认删除API："+t.apiName+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])(t.apiId).then((function(t){200===t.code&&(e.$message.success("删除成功！"),e.page=1,e.search())}))}))},sizeChange:function(t){this.size=t;var e="?limit="+this.size+"&offset="+this.page+"&developerId="+this.developerId;this.getList(e)},search:function(){if(this.page=1,this.value1)if(0===this.value1.length){var t="limit="+this.size+"&offset="+this.page+"&apiName="+this.APIName+"&developerId="+this.developerId;this.getList(t)}else{var e="limit="+this.size+"&offset="+this.page+"&apiName="+this.APIName+"&startTime="+this.value1[0]+"&endTime="+this.value1[1]+"&developerId="+this.developerId;this.getList(e)}else{var a="limit="+this.size+"&offset="+this.page+"&apiName="+this.APIName+"&developerId="+this.developerId;this.getList(a)}},getList:function(t){var e=this;Object(s["f"])(t).then((function(t){200===t.code&&(e.tableData=t.data.apiList,console.log(e.tableData),e.total=t.data.total)}))},refresh:function(){var t="limit="+this.size+"&offset= "+this.page+"&developerId="+this.developerId;this.getList(t)},handleCurrentChange:function(t){this.page=t;var e="limit="+this.size+"&offset="+this.page+"&developerId="+this.developerId;this.getList(e)},goApicreate:function(){this.$router.push("/api/add")}}},l=r,c=(a("932d"),a("2877")),u=Object(c["a"])(l,i,n,!1,null,"922dd7a6",null);e["default"]=u.exports},"7a07":function(t,e,a){},"841c":function(t,e,a){"use strict";var i=a("d784"),n=a("825a"),s=a("1d80"),o=a("129f"),r=a("14c3");i("search",1,(function(t,e,a){return[function(e){var a=s(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,a):new RegExp(e)[t](String(a))},function(t){var i=a(e,t,this);if(i.done)return i.value;var s=n(t),l=String(this),c=s.lastIndex;o(c,0)||(s.lastIndex=0);var u=r(s,l);return o(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]}))},"932d":function(t,e,a){"use strict";a("7a07")},b2cc:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"f",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return r})),a.d(e,"b",(function(){return l})),a.d(e,"e",(function(){return c}));var i=a("b775");function n(t){return Object(i["a"])({url:"/app/api/create",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/app/api/list?"+t,method:"get"})}function o(t){return Object(i["a"])({url:"/app/api/"+t,method:"get"})}function r(t){return Object(i["a"])({url:"/app/data/"+t+"/apiNum",method:"get"})}function l(t){return Object(i["a"])({url:"/app/api/"+t,method:"delete"})}function c(t,e){return Object(i["a"])({url:"/app/api/"+t,method:"put",data:e})}}}]);
