(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f7bf676"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"327d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"list_top list_top_bom"},[a("div",{staticClass:"list_title"},[t._v("上游列表")]),a("div",{staticClass:"list_search"},[a("el-input",{staticClass:"list_searchInput",attrs:{size:"small",placeholder:"搜索","suffix-icon":"el-icon-search"},on:{change:function(e){return t.getUpstreamList()}},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}}),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.gotoDetail}},[t._v("添加新上游")])],1)]),a("div",{staticClass:"table_box"},[a("el-table",{attrs:{"row-style":{height:"50px"},data:t.tableData,"highlight-current-row":"","header-cell-style":{"font-weight":400,"font-size":"16px",color:"#1D1C35"}}},[a("el-table-column",{attrs:{prop:"name",label:"上游名称","show-overflow-tooltip":"","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"text_detail",on:{click:function(a){return t.view(e.row)}}},[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"protocol",label:"协议",width:"120",align:"center"}}),a("el-table-column",{attrs:{prop:"server_address",label:"服务地址","show-overflow-tooltip":"","min-width":"250"}}),a("el-table-column",{attrs:{prop:"description",label:"服务描述","show-overflow-tooltip":"","min-width":"250"}}),a("el-table-column",{attrs:{label:"操作","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("配置")]),a("span",{staticClass:"handle"},[t._v("|")]),a("el-button",{staticClass:"textBut-danger",attrs:{type:"text"},on:{click:function(a){return t.delCert(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"list-pagination",attrs:{background:"","current-page":t.page,layout:"prev, pager, next",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.handleCurrentChange}})],1),a("el-drawer",{attrs:{title:"数据编辑器","before-close":t.handleClose,visible:t.drawer,direction:"rtl",size:"35%"},on:{"update:visible":function(e){t.drawer=e}}},[a("div",{staticClass:"demo-drawer__content"},[a("div",{staticStyle:{"text-align":"right"}},[a("div",{staticClass:"but-right2"},[a("el-select",{staticStyle:{width:"85px"},attrs:{size:"small"},model:{value:t.codeType,callback:function(e){t.codeType=e},expression:"codeType"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-button",{staticStyle:{"background-color":"#2650FF","margin-left":"10px"},attrs:{size:"small",type:"primary"}},[t._v("复制")]),a("el-button",{attrs:{size:"small"}},[t._v("文档")])],1)]),a("div",{staticClass:"code-box"},[a("prism-editor",{staticClass:"my-editor height-300 default-prism-editor",attrs:{highlight:t.highlighter,"line-numbers":t.lineNumbers},model:{value:t.requestExample,callback:function(e){t.requestExample=e},expression:"requestExample"}})],1),a("div",{staticClass:"demo-drawer__footer"},[a("el-button",{on:{click:function(e){return t.resetForm("form")}}},[t._v("取 消")]),a("el-button",{staticStyle:{"background-color":"#2650FF"},attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$refs.drawer.closeDrawer()}}},[t._v(t._s(t.loading?"提交中 ...":"提 交"))])],1)])]),a("el-drawer",{attrs:{title:"上游服务详情","before-close":t.handleClose,visible:t.drawerInfo,direction:"rtl",size:"40%"},on:{"update:visible":function(e){t.drawerInfo=e}}},[a("div",{staticClass:"demo-drawer__content"},[a("el-descriptions",{attrs:{title:" ",size:"medium",column:1,labelStyle:{"font-weight":"bold",width:"120px"}}},[a("el-descriptions-item",{attrs:{label:"服务名称"}},[t._v(t._s(t.upstreamInfo.name))]),a("el-descriptions-item",{attrs:{label:"服务端口"}},[t._v(t._s(t.upstreamInfo.port))]),a("el-descriptions-item",{attrs:{label:"路由前置路径"}},[t._v(t._s(t.upstreamInfo.prefix_path||"-"))]),a("el-descriptions-item",{attrs:{label:"协议"}},[t._v(t._s(t.upstreamInfo.protocol))]),a("el-descriptions-item",{attrs:{label:"服务地址"}},[t._v(t._s(t.upstreamInfo.server_address))]),a("el-descriptions-item",{attrs:{label:"服务描述"}},[t._v(t._s(t.upstreamInfo.description||"-"))])],1)],1)])],1)},i=[],r=(a("99af"),a("b0c0"),a("ac1f"),a("841c"),a("ecbf")),s=a("8c7a"),o=(a("cabf"),a("e57a")),l=(a("cb55"),a("416b"),a("84bf"),{components:{PrismEditor:o["a"]},data:function(){return{codeType:"json",requestExample:"{}",lineNumbers:!0,drawer:!1,drawerInfo:!1,upstreamInfo:{},loading:!1,search:{name:""},form:{name:"",email:"",password:"",role:[]},options:[{value:"json",label:"JSON"},{value:"yaml",label:"YAML"}],page:1,limit:10,total:0,tableData:[]}},created:function(){this.getUpstreamList()},methods:{gotoDetail:function(){this.$router.push({path:"/api/upstream/create"})},getUpstreamList:function(){var t=this,e="?page=".concat(this.page,"&limit=").concat(this.limit);this.search.name&&(e+="&name=".concat(this.search.name)),Object(r["d"])(e).then((function(e){200===e.code&&(t.tableData=e.data.upstreamList,t.total=e.data.total)}))},view:function(t){this.drawerInfo=!0,this.upstreamInfo=t},edit:function(t){this.$router.push({path:"/api/upstream/edit/"+t.id})},editData:function(){this.drawer=!0},handleClose:function(t){this.drawer=!1,this.drawerInfo=!1},delCert:function(t){var e=this;this.$confirm("确认删除上游服务："+t.name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["b"])(t.id).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.page=1,e.getUpstreamList()}))})).catch((function(){}))},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.limit=t,this.getuserList()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.page=t,this.getuserList()},highlighter:function(t){return Object(s["highlight"])(t,s["languages"].js)}}}),c=l,u=(a("5c83"),a("2877")),d=Object(u["a"])(c,n,i,!1,null,"7b0315a2",null);e["default"]=d.exports},"5c83":function(t,e,a){"use strict";a("b11a")},"841c":function(t,e,a){"use strict";var n=a("d784"),i=a("825a"),r=a("1d80"),s=a("129f"),o=a("14c3");n("search",1,(function(t,e,a){return[function(e){var a=r(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a):new RegExp(e)[t](String(a))},function(t){var n=a(e,t,this);if(n.done)return n.value;var r=i(t),l=String(this),c=r.lastIndex;s(c,0)||(r.lastIndex=0);var u=o(r,l);return s(r.lastIndex,c)||(r.lastIndex=c),null===u?-1:u.index}]}))},b11a:function(t,e,a){},ecbf:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"e",(function(){return o})),a.d(e,"b",(function(){return l}));var n=a("b775");function i(t){return Object(n["a"])({url:"/app/upstream/list"+t,method:"get"})}function r(t){return Object(n["a"])({url:"/app/upstream",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/app/upstream/"+t,method:"get"})}function o(t,e){return Object(n["a"])({url:"/app/upstream/"+t,method:"put",data:e})}function l(t){return Object(n["a"])({url:"/app/upstream/"+t,method:"delete"})}}}]);
