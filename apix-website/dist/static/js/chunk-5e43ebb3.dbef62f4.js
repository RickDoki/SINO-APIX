(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e43ebb3"],{"03bb":function(t,e,r){"use strict";r("2340")},2340:function(t,e,r){},"61bf":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("div",{staticClass:"list_top"},[r("div",{staticClass:"list_title"},[t._v(t._s(t.applicationVersion.version))]),r("div",{staticClass:"list_search"},[r("div",{staticClass:"but-left"},[r("el-dropdown",{on:{command:t.handleCommand}},[r("el-button",{attrs:{type:"primary",size:"small"}},[t._v(" 操作"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"del"}},[t._v("删除版本")])],1)],1)],1),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.docsEdit()}}},[t._v("编辑文档")])],1)]),r("div",{staticClass:"secondTitle"},[t._v(t._s(t.applicationVersion.description))]),r("div",{staticClass:"status"},[r("div",{staticClass:"left-span"},[r("span",[t._v("已关联api数量: ")]),r("span",{staticClass:"divbox"},[t._v(t._s(t.table.length)+"个")])]),r("div",{staticClass:"time"},[r("div",[r("span",[t._v("创建时间 : ")]),r("span",[t._v(t._s(t.applicationVersion.creationDate))])]),r("div",[r("span",[t._v("更新时间 : ")]),r("span",[t._v(t._s(t.applicationVersion.lastUpdateDate))])])])]),r("div",{staticClass:"table_box mode-margin"},[r("div",{staticClass:"serve-table"},[r("div",{staticClass:"table-tile"},[t._v("已关联API")]),r("el-button",{staticClass:"add-but",attrs:{plain:"",type:"primary",size:"small"},on:{click:t.gonewEdition}},[t._v("关联API ")])],1),r("el-table",{attrs:{data:t.table,"empty-text":"暂无数据","row-style":{height:"50px"},"highlight-current-row":"","header-cell-style":{"font-weight":400,"font-size":"16px",color:"#1D1C35"}}},[r("el-table-column",{attrs:{prop:"apiName",label:"API名称"}}),r("el-table-column",{attrs:{prop:"protocol",label:"协议"}}),r("el-table-column",{attrs:{prop:"domain",label:"域名"}}),r("el-table-column",{attrs:{prop:"url",label:"路径"}}),r("el-table-column",{attrs:{prop:"description",label:"API描述"}})],1)],1),r("el-drawer",{attrs:{title:"关联",size:"40%",visible:t.drawer,direction:t.direction,"before-close":t.handleClose},on:{"update:visible":function(e){t.drawer=e}}},[r("div",{staticClass:"formBox",staticStyle:{"margin-left":"20px"}},[r("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-position":"top"}},[r("el-form-item",{attrs:{label:"版本名称",prop:"name"}},[r("el-input",{staticClass:"inputWidth drawer",attrs:{placeholder:"",disabled:!0,clearable:""},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"版本描述",prop:"describe"}},[r("el-input",{staticClass:"inputWidth drawer",attrs:{placeholder:"",disabled:!0,clearable:""},model:{value:t.ruleForm.describe,callback:function(e){t.$set(t.ruleForm,"describe",e)},expression:"ruleForm.describe"}})],1),r("el-form-item",{attrs:{label:"关联API",prop:"API"}},[r("el-select",{staticClass:"inputWidth drawer",attrs:{multiple:"",placeholder:"请选择"},model:{value:t.ruleForm.API,callback:function(e){t.$set(t.ruleForm,"API",e)},expression:"ruleForm.API"}},t._l(t.options,(function(t){return r("el-option",{key:t.apiId,attrs:{label:t.apiName,value:t.apiId}})})),1)],1),r("div",{staticClass:"show-but",staticStyle:{"margin-top":"30px"},on:{click:t.createdApi}},[t._v(" 还没有API?去创建 >> ")]),r("div",{staticClass:"bottom_button_a",staticStyle:{margin:"0 auto"}},[r("el-button",{attrs:{size:"small"},on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("取消")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("创建")])],1)],1)],1)])],1)},a=[],i=(r("b0c0"),r("a4d3"),r("e01a"),r("d3b7"),r("25f0"),r("a1ad")),o=r("5f87"),s=(r("fcb4"),{data:function(){return{drawer:!1,direction:"rtl",table:[],ruleForm:{name:"",describe:"",API:[]},options:[],rules:{API:[{required:!0,message:"请选择API",trigger:"blur"}]},appCode:"",appVersionId:"",applicationVersion:{}}},created:function(){this.developerId=Object(o["a"])("userId_api"),this.getApiList(),this.appCode=this.$route.query.appCode,this.appVersionId=this.$route.query.appVersionId,this.getqueryApiList()},methods:{docsEdit:function(){this.$router.push("/docsEdit/version?id="+this.appVersionId+"&name="+this.applicationVersion.version)},getqueryApiList:function(){var t=this,e={appCode:this.appCode,appVersionId:this.appVersionId};Object(i["p"])(e).then((function(e){if(200===e.code){t.table=e.data.apiList,t.applicationVersion=e.data.applicationVersion,t.ruleForm.name=e.data.applicationVersion.version,t.ruleForm.describe=e.data.applicationVersion.description,t.ruleForm.API=[];for(var r=0;r<e.data.apiList.length;r++)t.ruleForm.API.push(1*e.data.apiList[r].apiId)}}))},getApiList:function(){var t=this;Object(i["b"])(this.developerId).then((function(e){200===e.code&&(t.options=e.data.apiList)}))},createdApi:function(){this.$router.push({path:"/api/add"})},handleClose:function(t){t()},resetForm:function(){this.drawer=!1},gonewEdition:function(){this.drawer=!0},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var r={apiIds:e.ruleForm.API.toString()};Object(i["e"])(e.appVersionId,r).then((function(t){200===t.code&&(e.drawer=!1,e.getqueryApiList())}))}))},handleCommand:function(t){var e=this;"del"===t&&Object(i["h"])(this.appVersionId).then((function(t){200===t.code&&e.$router.push({path:"/serve/serveDetail/"+e.appCode})}))}}}),l=s,u=(r("03bb"),r("2877")),p=Object(u["a"])(l,n,a,!1,null,"6ed568d6",null);e["default"]=p.exports},a1ad:function(t,e,r){"use strict";r.d(e,"t",(function(){return a})),r.d(e,"g",(function(){return i})),r.d(e,"u",(function(){return o})),r.d(e,"r",(function(){return s})),r.d(e,"s",(function(){return l})),r.d(e,"d",(function(){return u})),r.d(e,"b",(function(){return p})),r.d(e,"n",(function(){return c})),r.d(e,"h",(function(){return d})),r.d(e,"a",(function(){return m})),r.d(e,"p",(function(){return b})),r.d(e,"e",(function(){return f})),r.d(e,"w",(function(){return h})),r.d(e,"k",(function(){return v})),r.d(e,"v",(function(){return g})),r.d(e,"c",(function(){return I})),r.d(e,"m",(function(){return C})),r.d(e,"q",(function(){return w})),r.d(e,"o",(function(){return _})),r.d(e,"j",(function(){return j})),r.d(e,"i",(function(){return O})),r.d(e,"l",(function(){return A})),r.d(e,"f",(function(){return y}));var n=r("b775");function a(t){return Object(n["a"])({url:"/app/list?"+t,method:"get"})}function i(t){return Object(n["a"])({url:"/app/create",method:"post",data:t})}function o(t,e){return Object(n["a"])({url:"/app/"+t,method:"put",data:e})}function s(t){return Object(n["a"])({url:"/app/"+t,method:"delete"})}function l(t){return Object(n["a"])({url:"/app/"+t,method:"get"})}function u(t){return Object(n["a"])({url:"/app/data/"+t+"/appNum",method:"post"})}function p(t){return Object(n["a"])({url:"/app/api/list?developerId="+t,method:"get"})}function c(t,e){return Object(n["a"])({url:"/app/"+t+"/publish",method:"post",data:e})}function d(t){return Object(n["a"])({url:"/app/appVersion/"+t,method:"delete"})}function m(t){return Object(n["a"])({url:"/app/subscribed/list?"+t,method:"get"})}function b(t){return Object(n["a"])({url:"/app/api/queryApiList",method:"post",data:t})}function f(t,e){return Object(n["a"])({url:"/app/appVersion/"+t,method:"post",data:e})}function h(t){return Object(n["a"])({url:"/app/appVersion/"+t,method:"get"})}function v(t){return Object(n["a"])({url:"/gateway/log?"+t,method:"get"})}function g(t){return Object(n["a"])({url:"/app/subscribed/"+t,method:"get"})}function I(t){return Object(n["a"])({url:"/app/api/"+t,method:"get"})}function C(t){return Object(n["a"])({url:"/app/plugin",method:"post",data:t})}function w(){return Object(n["a"])({url:"/app/plugin/randomKey",method:"get"})}function _(t){return Object(n["a"])({url:"/app/plugin",method:"put",data:t})}function j(t){return Object(n["a"])({url:"/app/unSubscribe/"+t,method:"post"})}function O(t,e){return Object(n["a"])({url:"/app/plugin/"+t+"/"+e,method:"get"})}function A(t){return Object(n["a"])({url:"/app/rateLimit/open?appId="+t,method:"post"})}function y(t){return Object(n["a"])({url:"/app/rateLimit/close?appId="+t,method:"post"})}},fcb4:function(t,e,r){}}]);