(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bcd6c5b6"],{"4d2c":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"elx-steps-horizontal"},e._l(e.abstracts,(function(t,r){return a("div",{key:r,staticClass:"steps"},[a("div",{staticClass:"steps-content"},[r<e.value?a("div",{staticClass:"square squarefinish",on:{click:function(t){return e.btnClick(r)}}},[e._v(e._s(r+1))]):r==e.value?a("div",{staticClass:"square squareactive",on:{click:function(t){return e.btnClick(r)}}},[e._v(e._s(r+1))]):a("div",{staticClass:"square",on:{click:function(t){return e.btnClick(r)}}},[e._v(e._s(r+1))]),a("div",{staticClass:"steps-text-groups"},[r==e.value?a("span",{staticClass:"text-active"}):e._e(),r>e.value?a("span",{staticClass:"text-active"}):e._e(),r<e.value?a("span",{staticClass:"text-active"}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:r!=e.abstracts.length-1,expression:"index !=  ( abstracts.length - 1 )"}],staticClass:"sline",class:r<e.value?"active-line":""})])]),a("div",{staticClass:"title"},[a("div",{class:["steps-text",r<e.value?"text-active":""],on:{click:function(t){return e.btnClick(r)}}},[e._v(e._s(t))])])])})),0)},s=[],n=(a("a9e3"),{name:"ElxStepsHorizontal",components:{},props:{value:{default:0,type:Number,required:!0},abstracts:{type:Array,required:!0}},data:function(){return{}},computed:{},mounted:function(){console.log("abstracts",this.abstracts)},methods:{fnGetencnlength:function(e){var t=0;try{for(var a=0;a<e.length;++a){var r=e.charCodeAt(a);t+=r>=0&&r<=128?1:2}return t}catch(s){console.log("e",s)}return t},btnClick:function(e){this.$emit("change",e)}},watch:{}}),i=n,l=(a("d03a"),a("2877")),o=Object(l["a"])(i,r,s,!1,null,null,null);t["a"]=o.exports},"6b9b":function(e,t,a){"use strict";a("b5b3")},a1ad:function(e,t,a){"use strict";a.d(t,"u",(function(){return s})),a.d(t,"g",(function(){return n})),a.d(t,"v",(function(){return i})),a.d(t,"s",(function(){return l})),a.d(t,"t",(function(){return o})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return c})),a.d(t,"n",(function(){return p})),a.d(t,"h",(function(){return m})),a.d(t,"a",(function(){return d})),a.d(t,"p",(function(){return f})),a.d(t,"e",(function(){return b})),a.d(t,"x",(function(){return h})),a.d(t,"k",(function(){return v})),a.d(t,"w",(function(){return g})),a.d(t,"c",(function(){return x})),a.d(t,"m",(function(){return w})),a.d(t,"q",(function(){return C})),a.d(t,"r",(function(){return F})),a.d(t,"o",(function(){return _})),a.d(t,"j",(function(){return k})),a.d(t,"i",(function(){return P})),a.d(t,"l",(function(){return y})),a.d(t,"f",(function(){return O}));var r=a("b775");function s(e){return Object(r["a"])({url:"/app/list?"+e,method:"get"})}function n(e){return Object(r["a"])({url:"/app/create",method:"post",data:e})}function i(e,t){return Object(r["a"])({url:"/app/"+e,method:"put",data:t})}function l(e){return Object(r["a"])({url:"/app/"+e,method:"delete"})}function o(e){return Object(r["a"])({url:"/app/"+e,method:"get"})}function u(e){return Object(r["a"])({url:"/app/data/"+e+"/appNum",method:"post"})}function c(e){return Object(r["a"])({url:"/app/api/list?developerId="+e,method:"get"})}function p(e,t){return Object(r["a"])({url:"/app/"+e+"/publish",method:"post",data:t})}function m(e){return Object(r["a"])({url:"/app/appVersion/"+e,method:"delete"})}function d(e){return Object(r["a"])({url:"/app/subscribed/list?"+e,method:"get"})}function f(e){return Object(r["a"])({url:"/app/api/queryApiList",method:"post",data:e})}function b(e,t){return Object(r["a"])({url:"/app/appVersion/"+e,method:"post",data:t})}function h(e){return Object(r["a"])({url:"/app/appVersion/"+e,method:"get"})}function v(e){return Object(r["a"])({url:"/gateway/log?"+e,method:"get"})}function g(e){return Object(r["a"])({url:"/app/subscribed/"+e,method:"get"})}function x(e){return Object(r["a"])({url:"/app/api/"+e,method:"get"})}function w(e){return Object(r["a"])({url:"/app/plugin",method:"post",data:e})}function C(){return Object(r["a"])({url:"/app/plugin/randomKey",method:"get"})}function F(e){return Object(r["a"])({url:"/app/rateLimit/save",method:"post",data:e})}function _(e){return Object(r["a"])({url:"/app/plugin",method:"put",data:e})}function k(e){return Object(r["a"])({url:"/app/unSubscribe/"+e,method:"post"})}function P(e,t){return Object(r["a"])({url:"/app/plugin/"+e+"/"+t,method:"get"})}function y(e){return Object(r["a"])({url:"/app/rateLimit/open?appId="+e,method:"post"})}function O(e){return Object(r["a"])({url:"/app/rateLimit/close?appId="+e,method:"post"})}},b2cc:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return u}));var r=a("b775");function s(e){return Object(r["a"])({url:"/app/api/create",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/app/api/list?"+e,method:"get"})}function i(e){return Object(r["a"])({url:"/app/api/"+e,method:"get"})}function l(e){return Object(r["a"])({url:"/app/data/"+e+"/apiNum",method:"get"})}function o(e){return Object(r["a"])({url:"/app/api/"+e,method:"delete"})}function u(e,t){return Object(r["a"])({url:"/app/api/"+e,method:"put",data:t})}},b5b3:function(e,t,a){},d03a:function(e,t,a){"use strict";a("ed02")},d051:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[e._m(0),e._m(1),a("div",{staticClass:"formBox"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-position":"top"}},[a("el-form-item",{attrs:{label:"版本名称",prop:"name"}},[a("el-input",{staticClass:"inputWidth",attrs:{placeholder:"",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"版本描述",prop:"describe"}},[a("el-input",{staticClass:"inputWidth",attrs:{placeholder:"",clearable:""},model:{value:e.ruleForm.describe,callback:function(t){e.$set(e.ruleForm,"describe",t)},expression:"ruleForm.describe"}})],1),a("el-form-item",{attrs:{label:"关联API",prop:"API"}},[a("el-select",{staticClass:"inputWidth",attrs:{multiple:"",placeholder:"请选择"},model:{value:e.ruleForm.API,callback:function(t){e.$set(e.ruleForm,"API",t)},expression:"ruleForm.API"}},e._l(e.options,(function(e){return a("el-option",{key:e.apiId,attrs:{label:e.apiName,value:e.apiId}})})),1),a("span",{staticClass:"show-but",on:{click:e.createdApi}},[e._v("还没有API?去创建 >> ")])],1),a("div",{staticClass:"bottom_button_a"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("创建")])],1)],1)],1),a("created-api",{attrs:{drawerProps:e.drawerIsshow},on:{showChange:e.showChange}})],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list_top"},[a("div",{staticClass:"list_title"},[e._v("添加新本版本")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{staticClass:"secondTitle"},[e._v("向现有的服务添加新版本")])])}],n=(a("b0c0"),a("d3b7"),a("25f0"),a("fcb4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:"添加API",visible:e.drawer,direction:e.direction,"before-close":e.handleClose,size:"80%"},on:{"update:visible":function(t){e.drawer=t}}},[a("div",{staticClass:"main",staticStyle:{"margin-left":"30px",width:"95%"}},[a("div",{staticClass:"top"},[a("elx-steps-horizontal",{attrs:{abstracts:e.panelTitles},on:{change:e.stepChange},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}})],1),a("div",{staticClass:"middle"},[0===e.active?a("div",{staticClass:"formBox"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"130px","label-position":"top",size:"small"}},[a("el-form-item",{attrs:{label:"已有模板",prop:"name"}},[a("el-select",{staticClass:"inputWidth",attrs:{placeholder:"请选择上游服务",clearable:""},on:{change:e.upstreamChange},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"服务地址",prop:"serverAddress"}},[a("el-input",{staticClass:"inputWidth",attrs:{placeholder:"请输入服务地址"},on:{input:function(t){e.addressFlag=!1}},model:{value:e.form.serverAddress,callback:function(t){e.$set(e.form,"serverAddress",t)},expression:"form.serverAddress"}}),a("br"),a("span",{directives:[{name:"show",rawName:"v-show",value:e.addressFlag,expression:"addressFlag"}],staticStyle:{color:"#ff4949","font-size":"12px"}},[e._v("请输入合法的ip地址或服务地址！")])],1),a("el-form-item",{attrs:{label:"服务端口",prop:"port"}},[a("el-input",{staticClass:"inputWidth",attrs:{placeholder:"请输入服务端口"},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",e._n(t))},expression:"form.port"}})],1),a("el-form-item",{attrs:{label:"路由前置路径",prop:"upstreamPrefixPath"}},[a("el-input",{staticClass:"inputWidth",attrs:{placeholder:"请输入路由前置路径"},model:{value:e.form.upstreamPrefixPath,callback:function(t){e.$set(e.form,"upstreamPrefixPath",t)},expression:"form.upstreamPrefixPath"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"负载均衡算法",prop:"loadBalance"}},[a("el-select",{staticClass:"inputWidth",attrs:{placeholder:"请输入上游服务的名称"},model:{value:e.form.loadBalance,callback:function(t){e.$set(e.form,"loadBalance",t)},expression:"form.loadBalance"}},[a("el-option",{attrs:{label:"轮询",value:"roundRobin"}})],1)],1),a("el-form-item",{attrs:{label:"协议",prop:"protocol"}},[a("el-select",{staticClass:"inputWidth",attrs:{placeholder:"请选择上游服务协议"},model:{value:e.form.protocol,callback:function(t){e.$set(e.form,"protocol",t)},expression:"form.protocol"}},[a("el-option",{attrs:{label:"Http",value:"http"}}),a("el-option",{attrs:{label:"Https",value:"https"}})],1),a("span",{staticClass:"show-but",on:{click:e.changeShow}},[e._v("展示剩余四项配置 "),e.showTimeFlag?a("i",{staticClass:"el-icon-arrow-up"}):a("i",{staticClass:"el-icon-arrow-down"})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTimeFlag,expression:"showTimeFlag"}]},[a("el-form-item",[a("template",{slot:"label"},[a("span",{staticStyle:{position:"relative"}},[a("span",[e._v("重试次数")]),a("el-tooltip",{staticClass:"item",attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(" 重试机制将请求发到下一个上游"),a("br"),e._v("节点。值为 0 表示禁用重试机制，"),a("br"),e._v("留空表示使用可用后端节点的数量。 ")])]),a("i",{staticClass:"el-icon-question table-msg"})])],1)]),a("el-input",{staticClass:"inputWidth",attrs:{readonly:""},model:{value:e.tautologyNum,callback:function(t){e.tautologyNum=t},expression:"tautologyNum"}},[a("template",{slot:"append"},[e._v("次")])],2)],2),a("el-form-item",[a("template",{slot:"label"},[a("span",{staticStyle:{position:"relative"}},[a("span",[e._v("连接超时")]),a("el-tooltip",{staticClass:"item",attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(" 连接超时时间为系统预设，暂不支持修改。如有需要请联系管理员！ ")])]),a("i",{staticClass:"el-icon-question table-msg"})])],1)]),a("el-input",{staticClass:"inputWidth",attrs:{readonly:""},model:{value:e.connectNum,callback:function(t){e.connectNum=t},expression:"connectNum"}},[a("template",{slot:"append"},[e._v("s")])],2)],2),a("el-form-item",[a("template",{slot:"label"},[a("span",{staticStyle:{position:"relative"}},[a("span",[e._v("发送超时")]),a("el-tooltip",{staticClass:"item",attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(" 发送超时时间为系统预设，暂不支持修改。如有需要请联系管理员！ ")])]),a("i",{staticClass:"el-icon-question table-msg"})])],1)]),a("el-input",{staticClass:"inputWidth",attrs:{readonly:""},model:{value:e.sendNum,callback:function(t){e.sendNum=t},expression:"sendNum"}},[a("template",{slot:"append"},[e._v("s")])],2)],2),a("el-form-item",[a("template",{slot:"label"},[a("span",{staticStyle:{position:"relative"}},[a("span",[e._v("接收超时")]),a("el-tooltip",{staticClass:"item",attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(" 接收超时时间为系统预设，暂不支持修改。如有需要请联系管理员！ ")])]),a("i",{staticClass:"el-icon-question table-msg"})])],1)]),a("el-input",{staticClass:"inputWidth",attrs:{readonly:""},model:{value:e.receiveNum,callback:function(t){e.receiveNum=t},expression:"receiveNum"}},[a("template",{slot:"append"},[e._v("s")])],2)],2)],1)],1)],1):e._e(),1===e.active?a("div",{staticClass:"formBox"},[a("div",[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rulesapi,"label-width":"150px","label-position":"top",size:"small"}},[a("el-form-item",{attrs:{label:"API名称",prop:"apiName"}},[a("el-input",{staticClass:"inputWidth",attrs:{maxlength:"20","show-word-limit":""},model:{value:e.ruleForm.apiName,callback:function(t){e.$set(e.ruleForm,"apiName",t)},expression:"ruleForm.apiName"}})],1),a("el-form-item",{attrs:{label:"API路径",prop:"apiUrl"}},[a("el-input",{staticClass:"inputWidth",attrs:{maxlength:"500","show-word-limit":""},model:{value:e.ruleForm.apiUrl,callback:function(t){e.$set(e.ruleForm,"apiUrl",t)},expression:"ruleForm.apiUrl"}})],1),a("el-form-item",{attrs:{label:"请求方式",prop:"requestMethod"}},[a("el-select",{staticClass:"inputWidth",attrs:{placeholder:""},model:{value:e.ruleForm.requestMethod,callback:function(t){e.$set(e.ruleForm,"requestMethod",t)},expression:"ruleForm.requestMethod"}},[a("el-option",{attrs:{label:"GET",value:"GET"}}),a("el-option",{attrs:{label:"POST",value:"POST"}}),a("el-option",{attrs:{label:"PUT",value:"PUT"}}),a("el-option",{attrs:{label:"DELETE",value:"DELETE"}})],1)],1),a("el-form-item",{attrs:{label:"API前置路径",prop:"prefixPath"}},[a("el-input",{staticClass:"inputWidth",attrs:{maxlength:"500","show-word-limit":""},model:{value:e.ruleForm.prefixPath,callback:function(t){e.$set(e.ruleForm,"prefixPath",t)},expression:"ruleForm.prefixPath"}})],1),a("el-form-item",{attrs:{label:"是否为中台接口"}},[a("el-select",{staticClass:"inputWidth",attrs:{placeholder:""},model:{value:e.ruleForm.isInternal,callback:function(t){e.$set(e.ruleForm,"isInternal",t)},expression:"ruleForm.isInternal"}},[a("el-option",{attrs:{label:"是",value:"1"}}),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1),a("el-form-item",{attrs:{label:"API描述"}},[a("el-input",{staticClass:"inputWidth",attrs:{type:"textarea",autosize:{minRows:8,maxRows:15},maxlength:"500","show-word-limit":""},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1),a("el-form-item",{attrs:{label:"请求参数"}},[a("div",{staticClass:"content-boder",on:{contextmenu:e.showMenu}},[a("vxe-table",{ref:"xTable",attrs:{"header-cell-style":{backgroundColor:"#fff",color:"#494E6A"},border:"none","max-height":"280","show-overflow":"",stripe:"","row-config":{isCurrent:!0,isHover:!0},data:e.requestParams,"edit-config":{trigger:"click",mode:"cell",showIcon:!1}}},[a("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),a("vxe-table-column",{attrs:{field:"parame",title:"参数","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"type",title:"类型","edit-render":{name:"$select",options:[{value:"Integer",label:"Num"},{value:"String",label:"String"},{value:"Object",label:"Object"},{value:"Float",label:"Float"},{value:"List",label:"List"},{value:"Long",label:"Long"},{value:"Boolean",label:"Boolean"},{value:"Integer",label:"Integer"}]}}}),a("vxe-table-column",{attrs:{field:"isHaveto",title:"是否必选","edit-render":{name:"$select",options:[{value:"是",label:"是"},{value:"否",label:"否"}]}}}),a("vxe-table-column",{attrs:{field:"describe",title:"描述","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"default",title:"默认值","edit-render":{name:"input"}}})],1),a("div",{staticClass:"table-button"},[a("el-button",{staticClass:"add-but",attrs:{plain:"",type:"primary",size:"mini"},on:{click:e.savedata}},[e._v(" 新增 ")]),a("el-button",{staticClass:"del-but",attrs:{plain:"",type:"danger",size:"mini"},on:{click:e.newdata}},[e._v(" 删除 ")])],1)],1)]),a("el-form-item",{attrs:{label:"请求示例"}},[a("prism-editor",{staticClass:"my-editor height-300",attrs:{highlight:e.highlighter,"line-numbers":e.lineNumbers},model:{value:e.requestExample,callback:function(t){e.requestExample=t},expression:"requestExample"}})],1),a("el-form-item",{attrs:{label:"返回参数"}},[a("div",{staticClass:"content-boder",on:{contextmenu:e.showMenu}},[a("vxe-table",{ref:"xTableres",attrs:{"header-cell-style":{backgroundColor:"#fff",color:"#494E6A"},border:"none","max-height":"280","show-overflow":"",stripe:"","row-config":{isCurrent:!0,isHover:!0},data:e.responseParams,"edit-config":{trigger:"click",mode:"cell",showIcon:!1}}},[a("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),a("vxe-table-column",{attrs:{field:"parame",title:"参数","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"type",title:"类型","edit-render":{name:"$select",options:[{value:"Integer",label:"Num"},{value:"String",label:"String"},{value:"Object",label:"Object"},{value:"Float",label:"Float"},{value:"List",label:"List"},{value:"Long",label:"Long"},{value:"Boolean",label:"Boolean"},{value:"Integer",label:"Integer"}]}}}),a("vxe-table-column",{attrs:{field:"isHaveto",title:"是否必选","edit-render":{name:"$select",options:[{value:"是",label:"是"},{value:"否",label:"否"}]}}}),a("vxe-table-column",{attrs:{field:"describe",title:"描述","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"default",title:"默认值","edit-render":{name:"input"}}})],1),a("div",{staticClass:"table-button"},[a("el-button",{staticClass:"add-but",attrs:{plain:"",type:"primary",size:"mini"},on:{click:e.savedatares}},[e._v(" 新增 ")]),a("el-button",{staticClass:"del-but",attrs:{plain:"",type:"danger",size:"mini"},on:{click:e.newdatares}},[e._v(" 删除 ")])],1)],1)]),a("el-form-item",{attrs:{label:"返回示例"}},[a("prism-editor",{staticClass:"my-editor height-300",attrs:{highlight:e.highlighter,"line-numbers":e.lineNumbers},model:{value:e.responseExample,callback:function(t){e.responseExample=t},expression:"responseExample"}})],1)],1)],1)]):e._e()]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom_button"},[0===e.active?a("el-button",{attrs:{size:"small"},on:{click:e.backList}},[e._v("取消")]):e._e(),0===e.active?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.goNext("form")}}},[e._v("下一步")]):e._e()],1),a("div",{staticClass:"bottom_button_b"},[1===e.active?a("el-button",{attrs:{size:"small"},on:{click:e.goBACK}},[e._v("上一步")]):e._e(),0!==e.active?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.addSure("ruleForm")}}},[e._v("提交")]):e._e()],1)])])])}),i=[],l=a("1da1"),o=(a("96cf"),a("a4d3"),a("e01a"),a("159b"),a("ecbf")),u=a("b2cc"),c=a("e57a"),p=a("4d2c"),m=(a("cabf"),a("8c7a")),d=(a("cb55"),a("416b"),a("84bf"),{components:{PrismEditor:c["a"],ElxStepsHorizontal:p["a"]},data:function(){return{direction:"rtl",drawer:!1,showTimeFlag:!1,active:0,panelTitles:["设置上游服务","设置API信息"],lineNumbers:!0,readonly:!0,contextMenuData:{menuName:"demo",axis:{x:null,y:null},menulists:[{fnHandler:"savedata",icoName:"fa fa-home fa-fw",btnName:"新增一行"},{fnHandler:"newdata",icoName:"fa fa-home fa-fw",btnName:"删除选中 "}]},tautologyNum:1,connectNum:30,sendNum:15,receiveNum:15,addressFlag:!1,upstreamList:[],options:[],requestParams:[],responseParams:[],requestExample:"",responseExample:"",form:{name:"",description:"",protocol:"",serverAddress:"",port:"",upstreamPrefixPath:"",loadBalance:"roundRobin"},ruleForm:{apiName:"",description:"",apiUrl:"",requestMethod:"",apiVersion:"",markdown:"",domain:"",prefixPath:"",requestParams:"",requestExample:"",responseExample:"",isInternal:"0"},rules:{protocol:[{required:!0,message:"请选择上游服务协议",trigger:"change"}],loadBalance:[{required:!0,message:"请选择负载均衡算法",trigger:"change"}],serverAddress:[{required:!0,message:"请输入服务地址",trigger:"change"}],upstreamPrefixPath:[{pattern:/^\/(?!.*?-$)[a-zA-Z0-9-_/]*$/,message:'请输入合法的路径：以"/"开头，允许字母，数字，下划线，短横线'}],port:[{required:!0,message:"请输入服务端口",trigger:"change"},{pattern:/^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/,message:"请输入正确的端口号：1到65535"}]},rulesapi:{apiName:[{required:!0,message:"API名称不能为空",trigger:"change"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"change"}],apiUrl:[{required:!0,message:"API路径不能为空",trigger:"change"},{min:3,max:500,message:"长度在 3 到 500 个字符",trigger:"change"}],requestMethod:[{required:!0,message:"请求方式不能为空",trigger:"change"}],apiVersion:[{required:!0,message:"版本号不能为空",trigger:"change"}]}}},props:["drawerProps"],watch:{drawerProps:function(){this.drawer=this.drawerProps}},created:function(){this.getList()},methods:{handleClose:function(e){e(),this.$emit("showChange",!1)},stepChange:function(){1===this.active?this.active=0:this.goNext("form")},changeShow:function(){this.showTimeFlag=!this.showTimeFlag},backList:function(){this.$emit("showChange")},addSure:function(e){var t=this;console.log(JSON.stringify(this.$refs.xTable.afterFullData)),console.log(JSON.stringify(this.$refs.xTableres.afterFullData)),this.$refs[e].validate((function(e){if(e){console.log(t.form),console.log(t.ruleForm);var a={apiName:t.ruleForm.apiName,description:t.ruleForm.description,domain:t.form.serverAddress,apiUrl:t.ruleForm.apiUrl,requestMethod:t.ruleForm.requestMethod,requestParams:JSON.stringify(t.$refs.xTable.afterFullData),responseParams:JSON.stringify(t.$refs.xTableres.afterFullData),requestExample:JSON.stringify(t.requestExample),responseExample:JSON.stringify(t.responseExample),apiVersion:t.ruleForm.apiVersion,isInternal:t.ruleForm.isInternal,upstreamPrefixPath:t.form.upstreamPrefixPath,prefixPath:t.ruleForm.prefixPath,protocol:t.form.protocol,loadBalance:t.form.loadBalance,port:t.form.port};Object(u["a"])(a).then((function(e){200===e.code?(t.$message({message:e.msg,type:"success"}),t.$emit("showChange")):(t.ruleForm={},t.$message({message:e.msg,type:"error"}))}))}}))},goBACK:function(){this.active=0,this.$refs["ruleForm"].resetFields()},highlighter:function(e){return Object(m["highlight"])(e,m["languages"].js)},insertEvent:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=-1,r=e.$refs.xTable,s={parame:"",type:"",isHaveto:"",describe:"",default:""},t.next=5,r.insertAt(s,a);case 5:return n=t.sent,i=n.row,t.next=9,r.setActiveCell(i,"parame");case 9:case"end":return t.stop()}}),t)})))()},insertEventres:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=-1,r=e.$refs.xTableres,s={parame:"",type:"",isHaveto:"",describe:"",default:""},t.next=5,r.insertAt(s,a);case 5:return n=t.sent,i=n.row,t.next=9,r.setActiveCell(i,"parame");case 9:case"end":return t.stop()}}),t)})))()},showMenu:function(){event.preventDefault();var e=event.clientX,t=event.clientY;this.contextMenuData.axis={x:e,y:t}},savedata:function(){this.insertEvent()},savedatares:function(){this.insertEventres()},newdata:function(){this.$refs.xTable.removeCheckboxRow()},newdatares:function(){this.$refs.xTableres.removeCheckboxRow()},isValidIP:function(e){var t=/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/;return t.test(e)},isValidWeb:function(e){var t=/^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/;return t.test(e)},getList:function(){var e=this;Object(o["d"])("").then((function(t){if(200===t.code){var a=t.data.upstreamList;e.upstreamList=t.data.upstreamList,a.forEach((function(t){e.options.push({value:t.name,label:t.name})}))}}))},upstreamChange:function(){if(console.log("change"),console.log(this.form.name),""===this.form.name)console.log("ppp"),this.form={name:"",description:"",protocol:"",serverAddress:"",port:"",upstreamPrefixPath:"",loadBalance:"roundRobin"};else for(var e=0;e<this.upstreamList.length;e++)this.upstreamList[e].name==this.form.name&&(this.form={name:this.form.name,description:this.upstreamList[e].description,protocol:this.upstreamList[e].protocol,serverAddress:this.upstreamList[e].server_address,port:this.upstreamList[e].port,upstreamPrefixPath:this.upstreamList[e].prefix_path,loadBalance:"roundRobin"})},goNext:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a=t.isValidIP(t.form.serverAddress),r=t.isValidWeb(t.form.serverAddress);if(!a&&!r)return t.$message("请输入合法的ip地址或服务地址！"),void(t.addressFlag=!0);t.active=1}}))}}}),f=d,b=(a("6b9b"),a("2877")),h=Object(b["a"])(f,n,i,!1,null,"40c93e9d",null),v=h.exports,g=a("a1ad"),x=a("5f87"),w={components:{createdApi:v},data:function(){return{drawerIsshow:!1,developerId:"",appCode:"",ruleForm:{name:"",describe:"",API:[]},options:[],rules:{name:[{required:!0,message:"请输入版本名称",trigger:"blur"}],describe:[{required:!0,message:"请输入版本描述",trigger:"blur"}],API:[{required:!0,message:"请选择关联API",trigger:"blur"}]}}},created:function(){this.appCode=this.$route.query.appcode,this.developerId=Object(x["a"])("userId_api"),this.getApiList()},methods:{resetForm:function(){this.$router.go(-1)},getApiList:function(){var e=this;Object(g["b"])(this.developerId).then((function(t){200===t.code&&(e.options=t.data.apiList)}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var a={appVersion:t.ruleForm.name,versionDesc:t.ruleForm.describe,apiIds:t.ruleForm.API.toString()};Object(g["n"])(t.appCode,a).then((function(e){200===e.code&&t.$router.push({path:"/serve/serveDetail/"+t.appCode})}))}))},createdApi:function(){this.drawerIsshow=!0},showChange:function(){var e=this;this.drawerIsshow=!1,setTimeout((function(){e.getApiList()}),100)}}},C=w,F=Object(b["a"])(C,r,s,!1,null,"60bf499c",null);t["default"]=F.exports},ecbf:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return o}));var r=a("b775");function s(e){return Object(r["a"])({url:"/app/upstream/list"+e,method:"get"})}function n(e){return Object(r["a"])({url:"/app/upstream",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/app/upstream/"+e,method:"get"})}function l(e,t){return Object(r["a"])({url:"/app/upstream/"+e,method:"put",data:t})}function o(e){return Object(r["a"])({url:"/app/upstream/"+e,method:"delete"})}},ed02:function(e,t,a){},fcb4:function(e,t,a){}}]);